# ğŸš€ è¶…ç®€å•ä¿®å¤æ­¥éª¤ - 5 åˆ†é’Ÿè§£å†³é—®é¢˜

## ğŸ“ é—®é¢˜åˆ†æ

ä»ä½ çš„æ—¥å¿—çœ‹ï¼š
- âœ… é¢‘é“åˆ›å»ºæˆåŠŸï¼ˆæ•°æ®åº“æœ‰å†™å…¥æƒé™ï¼‰
- âŒ é¢‘é“åŠ è½½å¤±è´¥ï¼ˆæ•°æ®åº“ç¼ºå°‘å­—æ®µï¼ŒSwift æ— æ³•è§£ç ï¼‰

**å¿…é¡»æ‰§è¡Œ SQL ä¿®å¤ï¼**

---

## ğŸ”§ ä¿®å¤æ­¥éª¤ï¼ˆ3 æ­¥å®Œæˆï¼‰

### æ­¥éª¤ 1: æ‰“å¼€ Supabase SQL Editor

1. è®¿é—®ï¼šhttps://supabase.com/dashboard
2. é€‰æ‹©é¡¹ç›®ï¼š`EarthLord (lkekxzssfrspkyxtqysx)`
3. ç‚¹å‡»å·¦ä¾§ **"SQL Editor"**
4. ç‚¹å‡» **"New query"**

### æ­¥éª¤ 2: å¤åˆ¶ç²˜è´´ä»¥ä¸‹ 4 è¡Œ SQL

**é€ä¸ªå¤åˆ¶å¹¶æ‰§è¡Œ**ï¼ˆæ¯æ¬¡å¤åˆ¶ä¸€è¡Œï¼Œç‚¹å‡» Runï¼‰ï¼š

```sql
ALTER TABLE public.communication_channels ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ DEFAULT NOW();
```
ç‚¹å‡» **Run** âœ…

---

```sql
ALTER TABLE public.channel_subscriptions ADD COLUMN IF NOT EXISTS is_muted BOOLEAN DEFAULT false;
```
ç‚¹å‡» **Run** âœ…

---

```sql
ALTER TABLE public.channel_messages ADD COLUMN IF NOT EXISTS sender_callsign TEXT;
```
ç‚¹å‡» **Run** âœ…

---

```sql
ALTER TABLE public.channel_messages ADD COLUMN IF NOT EXISTS metadata JSONB;
```
ç‚¹å‡» **Run** âœ…

### æ­¥éª¤ 3: é‡å¯ App

1. **å®Œå…¨å…³é—­ App**ï¼ˆä» iPhone åå°æ¸…é™¤ï¼‰
2. **é‡æ–°å¯åŠ¨ App**
3. è¿›å…¥"é¢‘é“ä¸­å¿ƒ"
4. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

---

## âœ… æˆåŠŸæ ‡å¿—

ä¿®å¤æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ï¼š

```
âœ… [é¢‘é“] åŠ è½½å…¬å¼€é¢‘é“: 3 ä¸ª
âœ… [é¢‘é“] åŠ è½½å·²è®¢é˜…é¢‘é“: 1 ä¸ª
ğŸ“Š [é¢‘é“ä¸­å¿ƒ] æ•°æ®åŠ è½½å®Œæˆ:
  - å…¬å¼€é¢‘é“: 3 ä¸ª
  - å·²è®¢é˜…é¢‘é“: 1 ä¸ª
```

è€Œä¸æ˜¯ï¼š

```
âŒ [é¢‘é“] åŠ è½½å…¬å¼€é¢‘é“å¤±è´¥: æœªèƒ½è¯»å–æ•°æ®ï¼Œå› ä¸ºæ•°æ®ç¼ºå¤±ã€‚
```

---

## ğŸ“ å¦‚æœé‡åˆ°é—®é¢˜

### é—®é¢˜ A: Supabase é¡µé¢æ— æ³•æ‰“å¼€

**è§£å†³æ–¹æ¡ˆ 1**: åˆ·æ–°é¡µé¢
- æŒ‰ `Cmd + R` åˆ·æ–°

**è§£å†³æ–¹æ¡ˆ 2**: ä½¿ç”¨æ— ç—•æ¨¡å¼
- Safari: `Cmd + Shift + N`
- Chrome: `Cmd + Shift + N`

**è§£å†³æ–¹æ¡ˆ 3**: æ¸…é™¤ç¼“å­˜
- Safari: åå¥½è®¾ç½® â†’ éšç§ â†’ ç®¡ç†ç½‘ç«™æ•°æ® â†’ ç§»é™¤å…¨éƒ¨

### é—®é¢˜ B: SQL æ‰§è¡ŒæŠ¥é”™

**å¦‚æœçœ‹åˆ°é”™è¯¯**ï¼š`column already exists`
- âœ… è¿™æ˜¯å¥½æ¶ˆæ¯ï¼è¯´æ˜å­—æ®µå·²å­˜åœ¨
- ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œå³å¯

**å¦‚æœçœ‹åˆ°é”™è¯¯**ï¼š`relation "xxx" does not exist`
- âŒ è¯´æ˜è¡¨ä¸å­˜åœ¨
- éœ€è¦å…ˆè¿è¡Œå®Œæ•´çš„è¡¨åˆ›å»ºè„šæœ¬

### é—®é¢˜ C: æ‰§è¡Œåä»ç„¶å¤±è´¥

**æ£€æŸ¥å­—æ®µæ˜¯å¦çœŸçš„æ·»åŠ æˆåŠŸ**ï¼š

åœ¨ SQL Editor ä¸­è¿è¡Œï¼š

```sql
SELECT table_name, column_name
FROM information_schema.columns
WHERE table_schema = 'public'
AND table_name IN ('communication_channels', 'channel_subscriptions', 'channel_messages')
AND column_name IN ('updated_at', 'is_muted', 'sender_callsign', 'metadata')
ORDER BY table_name, column_name;
```

**åº”è¯¥çœ‹åˆ° 4 è¡Œç»“æœ**ã€‚

---

## ğŸ“‹ å¿«é€Ÿå‚è€ƒ

**4 è¡Œ SQLï¼ˆç›´æ¥å¤åˆ¶ï¼‰**ï¼š

```sql
ALTER TABLE public.communication_channels ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ DEFAULT NOW();
ALTER TABLE public.channel_subscriptions ADD COLUMN IF NOT EXISTS is_muted BOOLEAN DEFAULT false;
ALTER TABLE public.channel_messages ADD COLUMN IF NOT EXISTS sender_callsign TEXT;
ALTER TABLE public.channel_messages ADD COLUMN IF NOT EXISTS metadata JSONB;
```

---

## ğŸ¯ å…¶ä»–é—®é¢˜

### å•†åŸé—®é¢˜

```
ğŸ“¦ [IAP] StoreKit è¿”å›äº§å“æ•°é‡: 0
```

**åŸå› **ï¼šApp Store Connect æ²¡æœ‰é…ç½®äº§å“

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç™»å½• App Store Connect
2. è¿›å…¥ App â†’ In-App Purchases
3. åˆ›å»º 4 ä¸ªæ¶ˆè€—å‹äº§å“ï¼š
   - `com.earthlord.supply.survivor` - Â¥6
   - `com.earthlord.supply.explorer` - Â¥18
   - `com.earthlord.supply.lord` - Â¥30
   - `com.earthlord.supply.overlord` - Â¥68

### äº¤æ˜“ç³»ç»Ÿé—®é¢˜

```
âŒ [äº¤æ˜“] è·å–äº¤æ˜“å†å²å¤±è´¥: column trade_history.seller_id does not exist
```

**æš‚æ—¶å¿½ç•¥**ï¼Œè¿™ä¸ªä¸å½±å“é¢‘é“åŠŸèƒ½ã€‚

---

**ç°åœ¨ç«‹å³å» Supabase æ‰§è¡Œé‚£ 4 è¡Œ SQLï¼** ğŸš€

æ‰§è¡Œå®Œæˆåï¼Œé‡å¯ Appï¼ŒæŠŠæ–°çš„æ§åˆ¶å°æ—¥å¿—å‘ç»™æˆ‘ï¼
