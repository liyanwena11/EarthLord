# EarthLord æ¢ç´¢åŠŸèƒ½æ¶æ„å›¾

## ğŸ¯ å®Œæ•´å¯¼èˆªæµç¨‹

```
Appå¯åŠ¨
  â†“
MainTabView (TabView)
  â”œâ”€ Tab 0: MapTabView (åœ°å›¾)
  â”œâ”€ Tab 1: TerritoryTabView (é¢†åœ°)
  â”œâ”€ Tab 2: ResourcesTabView (èµ„æº) â† æˆ‘ä»¬çš„æµ‹è¯•å…¥å£
  â”œâ”€ Tab 3: ProfileTabView (ä¸ªäºº)
  â””â”€ Tab 4: MoreTabView (æ›´å¤š)

ç‚¹å‡» Tab 2: ResourcesTabView
  â†“
ResourcesTabView (NavigationStack) â† å¯¼èˆªå®¹å™¨
  â”œâ”€ é¡¶éƒ¨ï¼šäº¤æ˜“å¼€å…³
  â”œâ”€ åˆ†æ®µé€‰æ‹©å™¨ï¼š5ä¸ªé€‰é¡¹
  â””â”€ å†…å®¹åŒºåŸŸ (æ ¹æ®é€‰æ‹©æ˜¾ç¤ºä¸åŒå†…å®¹)
       â”œâ”€ POIåˆ†æ®µ â†’ POIListContentView
       â”œâ”€ èƒŒåŒ…åˆ†æ®µ â†’ BackpackContentView
       â”œâ”€ å·²è´­åˆ†æ®µ â†’ å ä½è§†å›¾
       â”œâ”€ é¢†åœ°åˆ†æ®µ â†’ å ä½è§†å›¾
       â””â”€ äº¤æ˜“åˆ†æ®µ â†’ å ä½è§†å›¾
```

---

## ğŸ“ POIå®Œæ•´æµç¨‹

```
POIListContentView
  â”‚
  â”œâ”€ çŠ¶æ€æ 
  â”‚   â”œâ”€ GPSåæ ‡ï¼š30.6586, 104.0647
  â”‚   â””â”€ å‘ç°æ•°é‡ï¼š3ä¸ªåœ°ç‚¹
  â”‚
  â”œâ”€ æœç´¢æŒ‰é’®
  â”‚   â””â”€ [ç‚¹å‡»] â†’ æ˜¾ç¤º"æœç´¢ä¸­..." â†’ 1.5ç§’åæ¢å¤
  â”‚
  â”œâ”€ ç­›é€‰å·¥å…·æ 
  â”‚   â”œâ”€ å…¨éƒ¨ (é»˜è®¤é€‰ä¸­)
  â”‚   â”œâ”€ åŒ»é™¢
  â”‚   â”œâ”€ è¶…å¸‚
  â”‚   â”œâ”€ å·¥å‚
  â”‚   â”œâ”€ è¯åº—
  â”‚   â””â”€ åŠ æ²¹ç«™
  â”‚
  â””â”€ POIåˆ—è¡¨ (5ä¸ªPOI)
       â”‚
       â”œâ”€ [ç‚¹å‡»] åºŸå¼ƒè¶…å¸‚ (å·²å‘ç°ã€æœ‰ç‰©èµ„ã€150ç±³)
       â”‚    â†“
       â”‚    NavigationLink
       â”‚    â†“
       â”‚    POIDetailView â† è¯¦æƒ…é¡µ
       â”‚         â”‚
       â”‚         â”œâ”€ é¡¶éƒ¨å¤§å›¾åŒºåŸŸ (1/3å±å¹•)
       â”‚         â”‚   â”œâ”€ ç»¿è‰²æ¸å˜èƒŒæ™¯
       â”‚         â”‚   â”œâ”€ è´­ç‰©è½¦å¤§å›¾æ ‡
       â”‚         â”‚   â”œâ”€ åç§°ï¼š"åºŸå¼ƒè¶…å¸‚"
       â”‚         â”‚   â””â”€ çŠ¶æ€å¾½ç« ï¼š"å·²å‘ç°"
       â”‚         â”‚
       â”‚         â”œâ”€ æè¿°å¡ç‰‡
       â”‚         â”‚   â””â”€ è¯¦ç»†æè¿°æ–‡å­—
       â”‚         â”‚
       â”‚         â”œâ”€ ä¿¡æ¯å¡ç‰‡
       â”‚         â”‚   â”œâ”€ è·ç¦»ï¼š150ç±³
       â”‚         â”‚   â”œâ”€ ç‰©èµ„çŠ¶æ€ï¼šæœ‰ç‰©èµ„
       â”‚         â”‚   â”œâ”€ å±é™©ç­‰çº§ï¼šä½å±
       â”‚         â”‚   â””â”€ æ¥æºï¼šåœ°å›¾æ•°æ®
       â”‚         â”‚
       â”‚         â””â”€ æ“ä½œæŒ‰é’®
       â”‚              â”œâ”€ [ç‚¹å‡»] æœå¯»æ­¤POI (ä¸»æŒ‰é’®)
       â”‚              â”‚    â†“
       â”‚              â”‚    .sheet(isPresented: $showExplorationResult)
       â”‚              â”‚    â†“
       â”‚              â”‚    ExplorationResultView â† æ¢ç´¢ç»“æœå¼¹çª—
       â”‚              â”‚         â”‚
       â”‚              â”‚         â”œâ”€ æˆå°±æ ‡é¢˜
       â”‚              â”‚         â”‚   â”œâ”€ åœ°å›¾å¤§å›¾æ ‡ + å…‰ç¯
       â”‚              â”‚         â”‚   â”œâ”€ "æ¢ç´¢å®Œæˆï¼"
       â”‚              â”‚         â”‚   â””â”€ å‰¯æ ‡é¢˜
       â”‚              â”‚         â”‚
       â”‚              â”‚         â”œâ”€ ç»Ÿè®¡æ•°æ®å¡ç‰‡
       â”‚              â”‚         â”‚   â”œâ”€ è¡Œèµ°è·ç¦» (æœ¬æ¬¡/ç´¯è®¡/æ’å#42)
       â”‚              â”‚         â”‚   â”œâ”€ æ¢ç´¢é¢ç§¯ (æœ¬æ¬¡/ç´¯è®¡/æ’å#38)
       â”‚              â”‚         â”‚   â”œâ”€ æ¢ç´¢æ—¶é•¿ (30åˆ†é’Ÿ)
       â”‚              â”‚         â”‚   â”œâ”€ å‘ç°POI (2ä¸ª)
       â”‚              â”‚         â”‚   â””â”€ è·å¾—ç»éªŒ (+350 XP)
       â”‚              â”‚         â”‚
       â”‚              â”‚         â”œâ”€ å¥–åŠ±ç‰©å“å¡ç‰‡
       â”‚              â”‚         â”‚   â”œâ”€ æœ¨æ x5 âœ“
       â”‚              â”‚         â”‚   â”œâ”€ çŸ¿æ³‰æ°´ x3 âœ“
       â”‚              â”‚         â”‚   â”œâ”€ ç½å¤´é£Ÿå“ x2 âœ“
       â”‚              â”‚         â”‚   â””â”€ "å·²æ·»åŠ åˆ°èƒŒåŒ…"
       â”‚              â”‚         â”‚
       â”‚              â”‚         â””â”€ [ç‚¹å‡»] ç¡®å®šæŒ‰é’®
       â”‚              â”‚              â†“
       â”‚              â”‚              dismiss()
       â”‚              â”‚              â†“
       â”‚              â”‚              è¿”å› POIDetailView
       â”‚              â”‚
       â”‚              â”œâ”€ [ç‚¹å‡»] æ ‡è®°å·²å‘ç° (å°æŒ‰é’®)
       â”‚              â”‚    â””â”€ æ›´æ–°POIçŠ¶æ€ä¸º"å·²å‘ç°"
       â”‚              â”‚
       â”‚              â””â”€ [ç‚¹å‡»] æ ‡è®°æ— ç‰©èµ„ (å°æŒ‰é’®)
       â”‚                   â””â”€ æ›´æ–°POIçŠ¶æ€ä¸º"å·²æœç©º"
       â”‚
       â”œâ”€ [ç‚¹å‡»] åŒ»é™¢åºŸå¢Ÿ (å·²å‘ç°ã€å·²æœç©ºã€320ç±³)
       â”œâ”€ [ç‚¹å‡»] åŠ æ²¹ç«™ (æœªå‘ç°)
       â”œâ”€ [ç‚¹å‡»] è¯åº—åºŸå¢Ÿ (å·²å‘ç°ã€æœ‰ç‰©èµ„ã€280ç±³)
       â””â”€ [ç‚¹å‡»] å·¥å‚åºŸå¢Ÿ (æœªå‘ç°)
```

---

## ğŸ’ èƒŒåŒ…å®Œæ•´æµç¨‹

```
BackpackContentView
  â”‚
  â”œâ”€ å®¹é‡çŠ¶æ€å¡
  â”‚   â”œâ”€ å½“å‰é‡é‡ï¼š64kg / 100kg
  â”‚   â”œâ”€ è¿›åº¦æ¡ï¼ˆé¢œè‰²æ ¹æ®ç™¾åˆ†æ¯”å˜åŒ–ï¼‰
  â”‚   â””â”€ è­¦å‘Šï¼š"èƒŒåŒ…å¿«æ»¡äº†ï¼" (>90%)
  â”‚
  â”œâ”€ æœç´¢æ¡†
  â”‚   â””â”€ [è¾“å…¥] â†’ å®æ—¶è¿‡æ»¤ç‰©å“
  â”‚
  â”œâ”€ åˆ†ç±»ç­›é€‰å·¥å…·æ 
  â”‚   â”œâ”€ å…¨éƒ¨ (é»˜è®¤)
  â”‚   â”œâ”€ é£Ÿç‰©
  â”‚   â”œâ”€ æ°´
  â”‚   â”œâ”€ ææ–™
  â”‚   â”œâ”€ å·¥å…·
  â”‚   â””â”€ åŒ»ç–—
  â”‚
  â””â”€ ç‰©å“åˆ—è¡¨ (8ç§ç‰©å“)
       â”‚
       â”œâ”€ çŸ¿æ³‰æ°´ x8 (æ— å“è´¨) - 4.0kg
       â”‚   â”œâ”€ [ç‚¹å‡»] ä½¿ç”¨ â†’ print("ä½¿ç”¨ç‰©å“: çŸ¿æ³‰æ°´")
       â”‚   â””â”€ [ç‚¹å‡»] å­˜å‚¨ â†’ print("å­˜å‚¨ç‰©å“: çŸ¿æ³‰æ°´")
       â”‚
       â”œâ”€ ç½å¤´é£Ÿå“ x12 (è‰¯å¥½) - 3.6kg
       â”œâ”€ ç»·å¸¦ x5 (æ™®é€š) - 0.25kg
       â”œâ”€ æ­¢ç—›è¯ x15 (ä¼˜ç§€) - 0.3kg
       â”œâ”€ æœ¨æ x20 (æ™®é€š) - 30kg
       â”œâ”€ åºŸé‡‘å± x8 (ç ´æŸ) - 16kg
       â”œâ”€ æ‰‹ç”µç­’ x2 (è‰¯å¥½) - 0.6kg
       â””â”€ ç»³å­ x3 (æ™®é€š) - 2.4kg
```

---

## ğŸ—ï¸ æ•°æ®æ¨¡å‹å…³ç³»

```
MockExplorationData (å‡æ•°æ®ç®¡ç†å™¨)
  â”‚
  â”œâ”€ mockPOIs: [POIPoint]
  â”‚   â””â”€ POIPoint
  â”‚        â”œâ”€ id: String
  â”‚        â”œâ”€ name: String
  â”‚        â”œâ”€ type: POIType (æšä¸¾)
  â”‚        â”œâ”€ coordinate: CLLocationCoordinate2D
  â”‚        â”œâ”€ status: POIStatus (æšä¸¾)
  â”‚        â”œâ”€ hasResources: Bool
  â”‚        â”œâ”€ dangerLevel: Int (1-5)
  â”‚        â”œâ”€ description: String
  â”‚        â””â”€ distance: Double?
  â”‚
  â”œâ”€ mockBackpackItems: [BackpackItem]
  â”‚   â””â”€ BackpackItem
  â”‚        â”œâ”€ id: String
  â”‚        â”œâ”€ itemId: String
  â”‚        â”œâ”€ name: String
  â”‚        â”œâ”€ category: ItemCategory (æšä¸¾)
  â”‚        â”œâ”€ quantity: Int
  â”‚        â”œâ”€ weight: Double
  â”‚        â”œâ”€ quality: ItemQuality? (æšä¸¾)
  â”‚        â””â”€ icon: String
  â”‚
  â”œâ”€ itemDefinitions: [ItemDefinition]
  â”‚   â””â”€ ItemDefinition
  â”‚        â”œâ”€ id: String
  â”‚        â”œâ”€ name: String
  â”‚        â”œâ”€ category: ItemCategory
  â”‚        â”œâ”€ weight: Double
  â”‚        â”œâ”€ volume: Double
  â”‚        â”œâ”€ rarity: ItemRarity (æšä¸¾)
  â”‚        â”œâ”€ hasQuality: Bool
  â”‚        â”œâ”€ description: String
  â”‚        â””â”€ stackable: Bool
  â”‚
  â””â”€ mockExplorationResult: ExplorationResult
       â””â”€ ExplorationResult
            â”œâ”€ walkDistance: Double
            â”œâ”€ totalWalkDistance: Double
            â”œâ”€ walkRanking: Int
            â”œâ”€ exploredArea: Double
            â”œâ”€ totalExploredArea: Double
            â”œâ”€ areaRanking: Int
            â”œâ”€ duration: TimeInterval
            â”œâ”€ itemsFound: [BackpackItem]
            â”œâ”€ poisDiscovered: Int
            â””â”€ experienceGained: Int
```

---

## ğŸ¨ ä¸»é¢˜å’Œæ ·å¼

```
ApocalypseTheme (æœ«æ—¥ä¸»é¢˜)
  â”‚
  â”œâ”€ èƒŒæ™¯è‰²
  â”‚   â”œâ”€ background: è¿‘é»‘è‰²
  â”‚   â”œâ”€ cardBackground: æ·±ç°è‰²
  â”‚   â””â”€ tabBarBackground: æµ…è‰²
  â”‚
  â”œâ”€ å¼ºè°ƒè‰²
  â”‚   â”œâ”€ primary: ä¸»é¢˜æ©™è‰²
  â”‚   â””â”€ primaryDark: æ·±æ©™è‰²
  â”‚
  â”œâ”€ æ–‡å­—è‰²
  â”‚   â”œâ”€ textPrimary: ç™½è‰²
  â”‚   â”œâ”€ textSecondary: 60%ç™½
  â”‚   â””â”€ textMuted: 40%ç™½
  â”‚
  â””â”€ çŠ¶æ€è‰²
       â”œâ”€ success: ç»¿è‰²
       â”œâ”€ warning: é»„è‰²
       â”œâ”€ danger: çº¢è‰²
       â””â”€ info: è“è‰²
```

---

## ğŸ“± é¡µé¢åˆ—è¡¨æ€»è§ˆ

### å·²å®Œæˆçš„é¡µé¢
1. âœ… **MockExplorationData.swift** - æµ‹è¯•å‡æ•°æ®
2. âœ… **POIListView.swift** - POIåˆ—è¡¨é¡µé¢ï¼ˆç‹¬ç«‹ç‰ˆï¼‰
3. âœ… **POIDetailView.swift** - POIè¯¦æƒ…é¡µé¢
4. âœ… **BackpackView.swift** - èƒŒåŒ…ç®¡ç†é¡µé¢ï¼ˆç‹¬ç«‹ç‰ˆï¼‰
5. âœ… **ExplorationResultView.swift** - æ¢ç´¢ç»“æœå¼¹çª—
6. âœ… **ResourcesTabView.swift** - èµ„æºæ¨¡å—ä¸»å…¥å£
   - POIListContentView (å†…åµŒ)
   - BackpackContentView (å†…åµŒ)
7. âœ… **ExplorationTestView.swift** - æµ‹è¯•æ¼”ç¤ºé¡µé¢
8. âœ… **QuickTestView.swift** - å¿«é€Ÿæµ‹è¯•é¡µé¢

### é¡µé¢æ–‡ä»¶ä½ç½®
```
EarthLord/
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ MockExplorationData.swift
â”œâ”€â”€ Views/
â”‚   â”œâ”€â”€ POIListView.swift
â”‚   â”œâ”€â”€ POIDetailView.swift
â”‚   â”œâ”€â”€ BackpackView.swift
â”‚   â”œâ”€â”€ ExplorationResultView.swift
â”‚   â”œâ”€â”€ ExplorationTestView.swift
â”‚   â”œâ”€â”€ QuickTestView.swift
â”‚   â””â”€â”€ Tabs/
â”‚       â”œâ”€â”€ ResourcesTabView.swift
â”‚       â””â”€â”€ MainTabView.swift (å·²æ›´æ–°)
â””â”€â”€ Theme/
    â””â”€â”€ ApocalypseTheme.swift
```

---

## ğŸ”„ çŠ¶æ€ç®¡ç†æµç¨‹

```
ResourcesTabView
  â”‚
  â”œâ”€ @State selectedSegment: ResourceSegment
  â”‚   â””â”€ æ§åˆ¶æ˜¾ç¤ºå“ªä¸ªåˆ†æ®µçš„å†…å®¹
  â”‚
  â”œâ”€ @State isTradingEnabled: Bool
  â”‚   â””â”€ æ§åˆ¶äº¤æ˜“å¼€å…³çŠ¶æ€
  â”‚
  â””â”€ å­è§†å›¾çŠ¶æ€
       â”‚
       â”œâ”€ POIListContentView
       â”‚   â”œâ”€ @State isSearching: Bool
       â”‚   â””â”€ @State selectedCategory: POIFilterCategory
       â”‚
       â””â”€ BackpackContentView
           â”œâ”€ @State searchText: String
           â””â”€ @State selectedCategory: BackpackFilterCategory

POIDetailView
  â”‚
  â”œâ”€ @State poi: POIPoint
  â”‚   â””â”€ å¯ä¿®æ”¹çš„POIæ•°æ®
  â”‚
  â””â”€ @State showExplorationResult: Bool
       â””â”€ æ§åˆ¶æ¢ç´¢ç»“æœå¼¹çª—æ˜¾ç¤º

ExplorationResultView
  â”‚
  â”œâ”€ let result: ExplorationResult
  â”‚   â””â”€ åªè¯»çš„æ¢ç´¢ç»“æœæ•°æ®
  â”‚
  â”œâ”€ @Environment(\.dismiss) dismiss
  â”‚   â””â”€ ç”¨äºå…³é—­å¼¹çª—
  â”‚
  â””â”€ @State showContent: Bool
       â””â”€ æ§åˆ¶åŠ¨ç”»æ˜¾ç¤º
```

---

## ğŸ¬ åŠ¨ç”»æ•ˆæœ

### POIè¯¦æƒ…é¡µé¡¶éƒ¨
- æ¸å˜èƒŒæ™¯
- å¤§å›¾æ ‡å±…ä¸­
- åº•éƒ¨é®ç½©æ¸å˜

### æ¢ç´¢ç»“æœå¼¹çª—
1. **æˆå°±æ ‡é¢˜** (0.1ç§’å»¶è¿Ÿ)
   - ç¼©æ”¾åŠ¨ç”»ï¼š0.8 â†’ 1.0
   - é€æ˜åº¦ï¼š0 â†’ 1
   - å¼¹ç°§æ•ˆæœ

2. **ç»Ÿè®¡å¡ç‰‡** (0.3ç§’å»¶è¿Ÿ)
   - ä¸Šç§»åŠ¨ç”»ï¼š+20 â†’ 0
   - é€æ˜åº¦ï¼š0 â†’ 1

3. **å¥–åŠ±å¡ç‰‡** (0.5ç§’å»¶è¿Ÿ)
   - ä¸Šç§»åŠ¨ç”»ï¼š+20 â†’ 0
   - é€æ˜åº¦ï¼š0 â†’ 1

4. **ç¡®è®¤æŒ‰é’®** (0.7ç§’å»¶è¿Ÿ)
   - é€æ˜åº¦ï¼š0 â†’ 1

### äº¤äº’åŠ¨ç”»
- åˆ†æ®µåˆ‡æ¢ï¼š0.2ç§’ç¼“åŠ¨
- ç­›é€‰æŒ‰é’®ï¼š0.2ç§’ç¼“åŠ¨
- Sheetå¼¹å‡ºï¼šç³»ç»Ÿé»˜è®¤
- å¯¼èˆªæ¨é€ï¼šç³»ç»Ÿé»˜è®¤

---

## âœ… åŠŸèƒ½æ£€æŸ¥æ¸…å•

### å¯¼èˆªåŠŸèƒ½
- [x] Tabåˆ‡æ¢æ­£å¸¸
- [x] NavigationLinkè·³è½¬æ­£å¸¸
- [x] è¿”å›æŒ‰é’®æ˜¾ç¤ºæ­£å¸¸
- [x] Sheetå¼¹çª—æ­£å¸¸
- [x] Dismisså…³é—­æ­£å¸¸

### æ•°æ®ä¼ é€’
- [x] POIæ•°æ®ä¼ é€’åˆ°è¯¦æƒ…é¡µ
- [x] æ¢ç´¢ç»“æœæ•°æ®ä¼ é€’åˆ°ç»“æœé¡µ
- [x] çŠ¶æ€æ›´æ–°æ­£å¸¸å“åº”

### UIæ˜¾ç¤º
- [x] æ‰€æœ‰å›¾æ ‡æ­£ç¡®æ˜¾ç¤º
- [x] é¢œè‰²ä¸»é¢˜ä¸€è‡´
- [x] æ–‡å­—å¤§å°åˆé€‚
- [x] å¸ƒå±€å“åº”å¼

### äº¤äº’åŠŸèƒ½
- [x] æœç´¢åŠŸèƒ½æ­£å¸¸
- [x] ç­›é€‰åŠŸèƒ½æ­£å¸¸
- [x] æŒ‰é’®ç‚¹å‡»å“åº”
- [x] å¼€å…³åˆ‡æ¢æ­£å¸¸
- [x] åˆ—è¡¨æ»šåŠ¨æµç•…

### åŠ¨ç”»æ•ˆæœ
- [x] å…¥åœºåŠ¨ç”»æµç•…
- [x] è½¬åœºåŠ¨ç”»è‡ªç„¶
- [x] æŒ‰é’®åé¦ˆåŠæ—¶

---

## ğŸš€ æµ‹è¯•å»ºè®®

### å¿«é€Ÿæµ‹è¯•è·¯å¾„
1. è¿è¡ŒApp
2. ç‚¹å‡»"èµ„æº"Tab
3. ç‚¹å‡»"åºŸå¼ƒè¶…å¸‚"
4. ç‚¹å‡»"æœå¯»æ­¤POI"
5. æŸ¥çœ‹æ¢ç´¢ç»“æœ
6. ç‚¹å‡»"ç¡®å®š"
7. ç‚¹å‡»è¿”å›
8. å®Œæˆï¼

### å®Œæ•´æµ‹è¯•è·¯å¾„
è§ã€Šæ¢ç´¢åŠŸèƒ½æµ‹è¯•æŒ‡å—.mdã€‹

---

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

### å·²çŸ¥é™åˆ¶
- ä½¿ç”¨å‡æ•°æ®ï¼Œæœªè¿æ¥çœŸå®API
- POIä½ç½®å›ºå®šï¼Œæœªä½¿ç”¨çœŸå®GPS
- ç‰©å“ä½¿ç”¨åŠŸèƒ½ä»…æ‰“å°æ—¥å¿—
- äº¤æ˜“åŠŸèƒ½æš‚æœªå®ç°

### æ‰©å±•å»ºè®®
1. è¿æ¥Supabaseè·å–çœŸå®POIæ•°æ®
2. é›†æˆçœŸå®GPSå®šä½
3. å®ç°ç‰©å“ä½¿ç”¨é€»è¾‘
4. æ·»åŠ åŠ¨ç”»éŸ³æ•ˆ
5. å®ç°äº¤æ˜“ç³»ç»Ÿ
6. æ·»åŠ èƒŒåŒ…å®¹é‡å‡çº§
7. å®ç°é¢†åœ°ä»“åº“
8. æ·»åŠ ç‰©å“åˆæˆç³»ç»Ÿ

---

æ¶æ„è®¾è®¡å®Œæˆï¼âœ¨
