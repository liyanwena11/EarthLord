# ğŸ† æˆå°±æ’è¡Œæ¦œç³»ç»Ÿ - ä¸ªäººç•Œé¢é›†æˆæŒ‡å—

## ğŸ“‹ ç›®å½•
- [è®¾è®¡å‚è€ƒ](#è®¾è®¡å‚è€ƒ)
- [é›†æˆæ­¥éª¤](#é›†æˆæ­¥éª¤)
- [æ–‡ä»¶è¯´æ˜](#æ–‡ä»¶è¯´æ˜)
- [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)
- [æ•ˆæœé¢„è§ˆ](#æ•ˆæœé¢„è§ˆ)

---

## ğŸ¨ è®¾è®¡å‚è€ƒ

### å‚è€ƒå›¾ç‰‡åˆ†æ

æ ¹æ®æä¾›çš„å‚è€ƒå›¾ç‰‡ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹è®¾è®¡é£æ ¼ï¼š

#### 1. **é¢œè‰²æ–¹æ¡ˆ**
```swift
// ä¸»èƒŒæ™¯è‰²
Color(red: 0x12/255, green: 0x18/255, blue: 0x24/255) // #121824

// å¡ç‰‡èƒŒæ™¯è‰²
Color(red: 0x1E/255, green: 0x24/255, blue: 0x30/255) // #1E2430

// åˆ†éš”çº¿é¢œè‰²
Color(red: 0x2A/255, green: 0x30/255, blue: 0x3D/255) // #2A303D

// å›¾æ ‡é¢œè‰²
Color(red: 0x34/255, green: 0x98/255, blue: 0xDB/255) // #3498DB

// æ–‡å­—é¢œè‰²
ç™½è‰²æ ‡é¢˜ï¼š#FFFFFF
ç°è‰²æ ‡ç­¾ï¼š#B0B8C4
```

#### 2. **å¸ƒå±€ç‰¹ç‚¹**
- âœ… **å‚ç›´åˆ—è¡¨å¸ƒå±€**ï¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ’åˆ—
- âœ… **æ¨¡å—åŒ–å¡ç‰‡**ï¼šæ¯ä¸ªåŠŸèƒ½ä¸€ä¸ªå¡ç‰‡
- âœ… **å·¦æ ‡ç­¾å³æ•°å€¼**ï¼šç»Ÿè®¡æ•°æ®çš„å±•ç¤ºæ–¹å¼
- âœ… **å›¾æ ‡+æ ‡é¢˜**ï¼šæ¨¡å—æ ‡é¢˜å¸¦å›¾æ ‡
- âœ… **ç»†çº¿åˆ†éš”**ï¼šå¡ç‰‡å†…åˆ—è¡¨é¡¹ç”¨ç»†çº¿åˆ†éš”
- âœ… **æ‰å¹³åŒ–è®¾è®¡**ï¼šæ— é˜´å½±ï¼Œç®€æ´æ˜äº†

#### 3. **äº¤äº’æ¨¡å¼**
- ğŸ“± ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡
- ğŸ”„ ä¸‹æ‹‰åˆ·æ–°æ•°æ®
- ğŸ‘† ç‚¹å‡»åˆ—è¡¨é¡¹æŸ¥çœ‹æ›´å¤š

---

## ğŸ”§ é›†æˆæ­¥éª¤

### æ­¥éª¤ 1ï¼šæ‰§è¡Œæ•°æ®åº“è¿ç§»

```bash
# åœ¨ Supabase æ§åˆ¶å°æˆ– CLI ä¸­æ‰§è¡Œ
supabase db push supabase_migration_010_achievement_leaderboard.sql
```

### æ­¥éª¤ 2ï¼šæ·»åŠ æ–°åˆ›å»ºçš„æ–‡ä»¶

å·²åˆ›å»ºçš„æ–‡ä»¶ï¼š
```
EarthLord/
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ LeaderboardModels.swift          âœ… å·²åˆ›å»º
â”œâ”€â”€ Managers/
â”‚   â””â”€â”€ LeaderboardManager.swift         âœ… å·²åˆ›å»º
â””â”€â”€ Views/
    â””â”€â”€ Profile/
        â”œâ”€â”€ AchievementStatsView.swift                    âœ… å·²åˆ›å»º
        â””â”€â”€ CategoryAchievementStatsView.swift            âœ… å·²åˆ›å»º
```

### æ­¥éª¤ 3ï¼šåœ¨ ProfileTabView ä¸­æ·»åŠ æˆå°±ç»Ÿè®¡æ¨¡å—

åœ¨ `ProfileTabView.swift` ä¸­çš„é€‚å½“ä½ç½®ï¼ˆå»ºè®®åœ¨"èƒŒåŒ…å®¹é‡è¿›åº¦æ¡"ä¹‹åï¼‰æ·»åŠ ï¼š

```swift
// MARK: - æˆå°±ç»Ÿè®¡æ¨¡å—
AchievementStatsView()
    .padding(.horizontal, 20)
    .padding(.bottom, 16)
```

### æ­¥éª¤ 4ï¼šæ·»åŠ è¯¦ç»†ç»Ÿè®¡å¼¹çª—

åœ¨ ProfileTabView ä¸­æ·»åŠ çŠ¶æ€å˜é‡ï¼š

```swift
@State private var showAchievementDetail = false
```

ç„¶åæ·»åŠ  .sheet ä¿®é¥°ç¬¦ï¼š

```swift
.sheet(isPresented: $showAchievementDetail) {
    CategoryAchievementStatsView()
}
```

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

### 1. **LeaderboardModels.swift**
**ä½ç½®**: `EarthLord/Models/LeaderboardModels.swift`

**åŠŸèƒ½**: å®šä¹‰æ’è¡Œæ¦œç›¸å…³çš„æ•°æ®æ¨¡å‹

**ä¸»è¦ç»“æ„**:
- `LeaderboardEntry` - æ’è¡Œæ¦œæ¡ç›®
- `CategoryLeaderboardEntry` - åˆ†ç±»æ’è¡Œæ¦œæ¡ç›®
- `SpeedRecord` - é€Ÿåº¦è®°å½•
- `LeaderboardReward` - æ’è¡Œæ¦œå¥–åŠ±
- `LeaderboardSeason` - èµ›å­£ä¿¡æ¯
- `UserLeaderboardStats` - ç”¨æˆ·ç»Ÿè®¡æ•°æ®

### 2. **LeaderboardManager.swift**
**ä½ç½®**: `EarthLord/Managers/LeaderboardManager.swift`

**åŠŸèƒ½**: ç®¡ç†æ’è¡Œæ¦œæ•°æ®çš„è·å–å’Œæ›´æ–°

**ä¸»è¦æ–¹æ³•**:
```swift
// è·å–ç§¯åˆ†æ¦œ
func fetchPointsLeaderboard(limit: Int, offset: Int) async throws -> [LeaderboardEntry]

// è·å–åˆ†ç±»æ¦œ
func fetchCategoryLeaderboard(category: AchievementCategory) async throws -> [CategoryLeaderboardEntry]

// è·å–ç”¨æˆ·ç»Ÿè®¡
func fetchUserLeaderboardStats(userId: UUID) async throws -> UserLeaderboardStats

// è·å–èµ›å­£ä¿¡æ¯
func fetchCurrentSeason() async throws -> LeaderboardSeason?
```

### 3. **AchievementStatsView.swift**
**ä½ç½®**: `EarthLord/Views/Profile/AchievementStatsView.swift`

**åŠŸèƒ½**: ä¸ªäººç•Œé¢ä¸­çš„æˆå°±ç»Ÿè®¡æ¨¡å—

**UIç»„ä»¶**:
- æ ‡é¢˜æ ï¼šå›¾æ ‡ + "æˆå°±ç»Ÿè®¡"
- ç»Ÿè®¡åˆ—è¡¨ï¼š
  - æˆå°±ç§¯åˆ†
  - å·²è§£é”æ•°é‡
  - å®Œæˆåº¦
  - å½“å‰æ’å
- åº•éƒ¨æŒ‰é’®ï¼šæŸ¥çœ‹å®Œæ•´æ’è¡Œæ¦œ

**äº¤äº’**:
- ç‚¹å‡»"æŸ¥çœ‹å®Œæ•´æ’è¡Œæ¦œ"å¼¹å‡ºè¯¦ç»†æ’è¡Œæ¦œ
- è‡ªåŠ¨åŠ è½½ç”¨æˆ·æˆå°±æ•°æ®

### 4. **CategoryAchievementStatsView.swift**
**ä½ç½®**: `EarthLord/Views/Profile/CategoryAchievementStatsView.swift`

**åŠŸèƒ½**: åˆ†ç±»æˆå°±è¯¦ç»†ç»Ÿè®¡ï¼ˆç±»ä¼¼"æ¢ç´¢ç»Ÿè®¡"ã€"æ´»åŠ¨ç»Ÿè®¡"ï¼‰

**UIç»„ä»¶**:
- é¡¶éƒ¨æ ‡é¢˜æ ï¼šè¯¦ç»†ç»Ÿè®¡ + å…³é—­æŒ‰é’®
- åˆ†ç±»æ¨¡å—å¡ç‰‡ï¼š
  - å»ºç­‘æˆå°±ç»Ÿè®¡
  - èµ„æºæˆå°±ç»Ÿè®¡
  - é¢†åœ°æˆå°±ç»Ÿè®¡
  - æ¢ç´¢æˆå°±ç»Ÿè®¡
  - äº¤æ˜“æˆå°±ç»Ÿè®¡
  - ç¤¾äº¤æˆå°±ç»Ÿè®¡

**æ¯ä¸ªåˆ†ç±»æ˜¾ç¤º**:
- æˆå°±ç§¯åˆ†
- å·²è§£é”æ•°é‡
- å½“å‰æ’å

---

## ğŸ’» ä»£ç ç¤ºä¾‹

### å®Œæ•´é›†æˆä»£ç 

åœ¨ `ProfileTabView.swift` çš„ `ScrollView` ä¸­æ·»åŠ ï¼š

```swift
// MARK: - æˆå°±ç»Ÿè®¡æ¨¡å—
AchievementStatsView()
    .padding(.horizontal, 20)
    .padding(.bottom, 16)
```

åœ¨ `ProfileTabView.swift` çš„çŠ¶æ€å˜é‡åŒºåŸŸæ·»åŠ ï¼š

```swift
@State private var showAchievementDetail = false
```

åœ¨ `ProfileTabView.swift` çš„æœ€åæ·»åŠ  sheetï¼š

```swift
.sheet(isPresented: $showAchievementDetail) {
    CategoryAchievementStatsView()
}
```

### ä¿®æ”¹ AchievementStatsView æ”¯æŒç‚¹å‡»è·³è½¬

åœ¨ `AchievementStatsView.swift` ä¸­ï¼Œä¿®æ”¹ `showFullLeaderboard` çš„ç»‘å®šï¼š

```swift
// åœ¨ ProfileTabView ä¸­ä¼ é€’ç»‘å®š
AchievementStatsView(showDetail: $showAchievementDetail)
```

åœ¨ `AchievementStatsView.swift` ä¸­æ·»åŠ å‚æ•°ï¼š

```swift
struct AchievementStatsView: View {
    @Binding var showDetail: Bool  // æ·»åŠ è¿™ä¸ª

    // ... å…¶ä»–ä»£ç 

    var body: some View {
        // ... å…¶ä»–ä»£ç 

        Button {
            showDetail = true  // æ”¹ä¸ºä½¿ç”¨ç»‘å®š
        } label: {
            // ... æŒ‰é’®å†…å®¹
        }

        // ç§»é™¤ sheetï¼Œä½¿ç”¨çˆ¶è§†å›¾çš„ sheet
    }
}
```

---

## ğŸ¯ æ•ˆæœé¢„è§ˆ

### ä¸ªäººç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [å¤´åƒ]                              â”‚
â”‚  å¹¸å­˜è€…æ¡£æ¡ˆ                           â”‚
â”‚  ç”¨æˆ·å                               â”‚
â”‚  ID: xxxxxxxx Â· åŠ å…¥ xx å¤©            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ° é¢†åœ°  |  âš–ï¸ èƒŒåŒ…  |  ğŸ‘¥ é™„è¿‘å¹¸å­˜è€…  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç‰©å“ç»Ÿè®¡å°å¡ç‰‡...]                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  èƒŒåŒ…å®¹é‡è¿›åº¦æ¡                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ† æˆå°±ç»Ÿè®¡         â† æ–°å¢æ¨¡å—       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â­ æˆå°±ç§¯åˆ†            1250    â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ ğŸ”“ å·²è§£é”               45     â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ âœ”ï¸ å®Œæˆåº¦               45%    â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ ğŸ“Š å½“å‰æ’å             #12    â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ æŸ¥çœ‹å®Œæ•´æ’è¡Œæ¦œ            >    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ï¿½ï¿½ï¿½æ—¥é€šè¡Œè¯                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç‰©èµ„å•†åŸ                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¯¦ç»†ç»Ÿè®¡ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯¦ç»†ç»Ÿè®¡                      [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—ï¸ å»ºç­‘æˆå°±ç»Ÿè®¡                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æˆå°±ç§¯åˆ†               400     â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ å·²è§£é”                 15      â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ å½“å‰æ’å               #8      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  ğŸ“¦ èµ„æºæˆå°±ç»Ÿè®¡                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æˆå°±ç§¯åˆ†               300     â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ å·²è§£é”                 10      â”‚  â”‚
â”‚  â”‚ ---------------------------- â”‚  â”‚
â”‚  â”‚ å½“å‰æ’å              #15      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                       â”‚
â”‚  ğŸ é¢†åœ°æˆå°±ç»Ÿè®¡                     â”‚
â”‚  ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ’è¡Œæ¦œç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆå°±æ’è¡Œæ¦œ                    [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç§¯åˆ†æ¦œ] [æ•°é‡æ¦œ] [å®Œæˆåº¦]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¥‡                                  â”‚
â”‚     è’åŸå¹¸å­˜è€…                        â”‚
â”‚     3500 ç§¯åˆ† â€¢ 85 æˆå°±              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  ğŸ¥ˆ                                  â”‚
â”‚     å»ºç­‘ä¹‹ç‹                          â”‚
â”‚     3200 ç§¯åˆ† â€¢ 78 æˆå°±              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  ğŸ¥‰                                  â”‚
â”‚     æ¢ç´¢ä¸“å®¶                          â”‚
â”‚     2800 ç§¯åˆ† â€¢ 70 æˆå°±              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ‘¤ æˆ‘çš„æ’å: #12                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ é«˜çº§åŠŸèƒ½

### 1. å®æ—¶æ›´æ–°

ä½¿ç”¨ Supabase Realtime ç›‘å¬æ’è¡Œæ¦œå˜åŒ–ï¼š

```swift
func watchLeaderboardChanges() {
    supabase.channel("leaderboard")
        .on("postgres_changes", filter: SupabaseSubscriptionFilter(
            event: .update,
            schema: "public",
            table: "achievement_leaderboard"
        )) { payload in
            // æ›´æ–°æœ¬åœ°æ•°æ®
            Task {
                await loadStats()
            }
        }
        .subscribe()
}
```

### 2. ç¼“å­˜ä¼˜åŒ–

```swift
// ä½¿ç”¨ @AppStorage ç¼“å­˜ç”¨æˆ·æ•°æ®
@AppStorage("cachedAchievementStats") private var cachedStats: String = ""

func loadStats() {
    // å…ˆæ˜¾ç¤ºç¼“å­˜æ•°æ®
    if let cached = loadFromCache() {
        self.userStats = cached
    }

    // ç„¶ååŠ è½½æœ€æ–°æ•°æ®
    Task {
        let fresh = try await manager.fetchUserLeaderboardStats(userId: userId)
        await MainActor.run {
            self.userStats = fresh
            saveToCache(fresh)
        }
    }
}
```

### 3. åˆ†é¡µåŠ è½½

```swift
// åœ¨æ’è¡Œæ¦œç•Œé¢å®ç°æ— é™æ»šåŠ¨
var body: some View {
    ScrollView {
        LazyVStack {
            ForEach(entries) { entry in
                LeaderboardEntryRow(entry: entry)
                    .onAppear {
                        if entry.id == entries.last?.id {
                            Task {
                                await loadMore()
                            }
                        }
                    }
            }
        }
    }
}
```

---

## ğŸ“Š æ•°æ®æµ

```
ç”¨æˆ·è§£é”æˆå°±
    â†“
user_achievements è¡¨æ›´æ–°ï¼ˆè§¦å‘å™¨ï¼‰
    â†“
update_user_achievement_leaderboard() è‡ªåŠ¨æ‰§è¡Œ
    â†“
achievement_leaderboard è¡¨æ›´æ–°
    â†“
LeaderboardManager è·å–æœ€æ–°æ•°æ®
    â†“
AchievementStatsView æ˜¾ç¤ºåœ¨ä¸ªäººç•Œé¢
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ€§èƒ½è€ƒè™‘**
   - ä¸è¦æ¯æ¬¡éƒ½é‡æ–°åŠ è½½æ‰€æœ‰æ•°æ®
   - ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢
   - æ’è¡Œæ¦œæ•°æ®å¯ä»¥ç¼“å­˜ 5-15 åˆ†é’Ÿ

2. **éšç§ä¿æŠ¤**
   - ç¡®ä¿åªæœ‰ç”¨æˆ·è‡ªå·±èƒ½çœ‹åˆ°è‡ªå·±çš„å®Œæ•´æ•°æ®
   - å…¬å¼€çš„æ’è¡Œæ¦œåªæ˜¾ç¤ºå¿…è¦ä¿¡æ¯

3. **é”™è¯¯å¤„ç†**
   - ç½‘ç»œå¤±è´¥æ—¶æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
   - æä¾›é‡è¯•æŒ‰é’®

4. **æ•°æ®åº“å®‰å…¨**
   - ä½¿ç”¨ RLS (Row Level Security)
   - éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
   - é™åˆ¶æŸ¥è¯¢é¢‘ç‡é˜²æ­¢æ»¥ç”¨

---

## ğŸ‰ å®Œæˆæ¸…å•

- [ ] æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] æ·»åŠ  LeaderboardModels.swift
- [ ] æ·»åŠ  LeaderboardManager.swift
- [ ] æ·»åŠ  AchievementStatsView.swift
- [ ] æ·»åŠ  CategoryAchievementStatsView.swift
- [ ] åœ¨ ProfileTabView ä¸­é›†æˆæˆå°±ç»Ÿè®¡æ¨¡å—
- [ ] æµ‹è¯•æ•°æ®åŠ è½½å’Œæ˜¾ç¤º
- [ ] æµ‹è¯•æ’è¡Œæ¦œç‚¹å‡»è·³è½¬
- [ ] æµ‹è¯•åˆ†ç±»ç»Ÿè®¡æ˜¾ç¤º
- [ ] éªŒè¯æ€§èƒ½å’Œç¼“å­˜

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ•°æ®åº“è¿ç§»æ˜¯å¦æˆåŠŸ
2. Supabase è¿æ¥æ˜¯å¦æ­£å¸¸
3. ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
4. æˆå°±æ•°æ®æ˜¯å¦å­˜åœ¨

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-02-26
**ä½œè€…**: Claude
**å‚è€ƒè®¾è®¡**: ç”¨æˆ·æä¾›çš„3å¼ æ¸¸æˆUIæˆªå›¾
