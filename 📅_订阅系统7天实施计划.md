# ğŸ“… EarthLord è®¢é˜…ç³»ç»Ÿ 7 å¤©å®æ–½è®¡åˆ’

**è®¡åˆ’å‘¨æœŸ**: 7 å¤©ï¼ˆå¯æ ¹æ®å®é™…è°ƒæ•´ï¼‰  
**ç›®æ ‡**: å®Œæ•´å®ç° iOS è‡ªåŠ¨ç»­æœŸè®¢é˜…ç³»ç»Ÿ  
**éš¾åº¦**: â­â­ ä¸­ç­‰  
**å·¥ä½œé‡**: 40-50 å°æ—¶  

---

## ğŸ“Š æ•´ä½“æ—¶é—´çº¿

```
Day 1  ğŸŒ åœ¨ App Store Connect é…ç½®äº§å“        (4h)
Day 2  ğŸ’¾ æ‰§è¡Œæ•°æ®åº“è¿ç§»                        (2h)
Day 3  ğŸ› ï¸  å®ç° IAPManager æ ¸å¿ƒä»£ç             (6h)
Day 4  ğŸ¨ åˆ›å»ºè®¢é˜… UI è§†å›¾                      (4h)
Day 5  ğŸ”— æƒç›Šç³»ç»Ÿé›†æˆ & ä»£ç æµ‹è¯•              (6h)
Day 6  ğŸ§ª æ²™ç›’æµ‹è¯• & é—®é¢˜ä¿®å¤                  (4h)
Day 7  âœ… æœ€åæ£€æŸ¥ & ä¼˜åŒ–                      (2h)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è€—æ—¶: 28-30 å°æ—¶

**å¹³å‡æ¯å¤©**: 4-6 å°æ—¶
**æœ€å¿™çš„æ—¥å­**: Day 3, 5 (å„ 6 å°æ—¶)
**æœ€è½»æ¾çš„æ—¥å­**: Day 1, 7 (å„ 2-4 å°æ—¶)
```

---

## ğŸ—“ï¸ Day 1: App Store Connect é…ç½® (4 å°æ—¶)

### ç›®æ ‡
- âœ… åˆ›å»ºè®¢é˜…ç»„
- âœ… åˆ›å»º 4 ä¸ªè®¢é˜…äº§å“
- âœ… é…ç½®æœ¬åœ°åŒ–ä¿¡æ¯
- âœ… åˆ›å»ºæ²™ç›’æµ‹è¯•è´¦å·

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 1.1: ç™»å½•å¹¶åˆ›å»ºè®¢é˜…ç»„ (30 åˆ†é’Ÿ)

```
1. æ‰“å¼€ https://appstoreconnect.apple.com
2. é€‰æ‹©åº”ç”¨ > App å†…è´­ä¹°é¡¹ç›® > è®¢é˜…
3. ç‚¹å‡» + > åˆ›å»ºæ–°è®¢é˜…ç»„

é…ç½®:
â”œâ”€ ç»„åç§°: æœ«æ—¥é€šè¡Œè¯
â”œâ”€ å‚è€ƒåç§°: earthlord_apocalypse_pass
â””â”€ ä¿å­˜
```

**æˆªå›¾æ ‡è®°**: éœ€è¦è®°å½•è®¢é˜…ç»„ IDï¼ˆç”¨äºåç»­ App Store Connect æ“ä½œï¼‰

#### æ­¥éª¤ 1.2: åˆ›å»º 4 ä¸ªäº§å“ (90 åˆ†é’Ÿ)

**åˆ›å»ºé¡ºåº** (ä»é«˜åˆ°ä½ä»·å€¼ï¼‰:

**äº§å“ 1: é¢†ä¸»-å¹´ä»˜**

```
åŸºæœ¬ä¿¡æ¯:
â”œâ”€ äº§å“ ID: com.earthlord.sub.lord.yearly
â”œâ”€ å‘¨æœŸ: 1 å¹´
â”œâ”€ ä»·æ ¼: Â¥168
â””â”€ è¯•ç”¨æœŸ: 7 å¤©

æ“ä½œæ­¥éª¤:
1. ç‚¹å‡» + æ·»åŠ äº§å“
2. é€‰æ‹©"è®¢é˜…"
3. è¾“å…¥äº§å“ ID
4. é€‰æ‹©å‘¨æœŸ (1 å¹´)
5. é€‰æ‹©å®šä»·ç­‰çº§ Â¥168
6. å¯ç”¨è¯•ç”¨æœŸ 7 å¤©
7. ä¿å­˜
```

**äº§å“ 2: é¢†ä¸»-æœˆä»˜**

```
äº§å“ ID: com.earthlord.sub.lord.monthly
å‘¨æœŸ: 1 æœˆ
ä»·æ ¼: Â¥25
è¯•ç”¨æœŸ: 7 å¤©

[é‡å¤ä¸Šè¿°æ­¥éª¤]
```

**äº§å“ 3: æ¢ç´¢è€…-å¹´ä»˜**

```
äº§å“ ID: com.earthlord.sub.explorer.yearly
å‘¨æœŸ: 1 å¹´
ä»·æ ¼: Â¥88
è¯•ç”¨æœŸ: 7 å¤©

[é‡å¤ä¸Šè¿°æ­¥éª¤]
```

**äº§å“ 4: æ¢ç´¢è€…-æœˆä»˜**

```
äº§å“ ID: com.earthlord.sub.explorer.monthly
å‘¨æœŸ: 1 æœˆ
ä»·æ ¼: Â¥12
è¯•ç”¨æœŸ: 7 å¤©

[é‡å¤ä¸Šè¿°æ­¥éª¤]
```

#### æ­¥éª¤ 1.3: é…ç½®æœ¬åœ°åŒ–ä¿¡æ¯ (90 åˆ†é’Ÿ)

**å¯¹æ¯ä¸ªäº§å“**ï¼Œç¼–è¾‘"æ˜¾ç¤ºåç§°å’Œæè¿°"ï¼š

**ä»¥"æ¢ç´¢è€…-æœˆä»˜"ä¸ºä¾‹:**

```
1. App å†…è´­ä¹°é¡¹ç›® > com.earthlord.sub.explorer.monthly
2. ç‚¹å‡»"ç¼–è¾‘"
3. åœ¨æ‰€æœ‰æœ¬åœ°åŒ–ä¸­ > ç®€ä½“ä¸­æ–‡

å¡«å†™:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ˜¾ç¤ºåç§° (æœ€å¤š 35 ä¸ªå­—ç¬¦):               â”‚
â”‚ "æ¢ç´¢è€…é€šè¡Œè¯ - é¦–æœˆä»… 7 å¤©å…è´¹"        â”‚
â”‚                                         â”‚
â”‚ æè¿° (æœ€å¤š 400 ä¸ªå­—ç¬¦):                  â”‚
â”‚ "âœ¨ æ¯æ—¥æ¢ç´¢æ¬¡æ•°æ— é™                    â”‚
â”‚  ğŸ—ºï¸ æœç´¢èŒƒå›´æ‰©å¤§è‡³ 2 km                 â”‚
â”‚  ğŸ“¦ èƒŒåŒ…å®¹é‡æå‡è‡³ 200 æ ¼                â”‚
â”‚  âš¡ å»ºé€ é€Ÿåº¦ 2 å€                       â”‚
â”‚  ğŸ’° äº¤æ˜“æ¬¡æ•°æ— é™                        â”‚
â”‚  ğŸ–ï¸ è·å¾—æ¢ç´¢è€…å¾½ç«                      â”‚
â”‚  ğŸ æ¯æœˆ Â¥12 ç‰©èµ„ç¤¼åŒ…                   â”‚
â”‚                                         â”‚
â”‚  é¦–æœˆä»…éœ€ 7 å¤©å…è´¹è¯•ç”¨ï¼Œ                â”‚
â”‚  ä¹‹åæ¯æœˆ Â¥12ã€‚                         â”‚
â”‚  éšæ—¶å¯åœ¨è®¾ç½®ä¸­å–æ¶ˆã€‚"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ä¿å­˜
```

**åŒæ ·æ–¹å¼é…ç½®å…¶ä»– 3 ä¸ªäº§å“**

**æç¤º**: ä½¿ç”¨ emoji ä½¿æè¿°æ›´å¸å¼•äºº âœ¨

#### æ­¥éª¤ 1.4: åˆ›å»ºæ²™ç›’æµ‹è¯•è´¦å· (30 åˆ†é’Ÿ)

```
1. ç”¨æˆ·å’Œè®¿é—® > æ²™ç›’ > æµ‹è¯•å‘˜
2. ç‚¹å‡» + æ·»åŠ æµ‹è¯•å‘˜

åˆ›å»º 3 ä¸ªè´¦å·:

è´¦å· 1:
â”œâ”€ å§“å: æµ‹è¯•å‘˜1
â”œâ”€ é‚®ç®±: explorer-test@example.com
â”œâ”€ å¯†ç : [ç”Ÿæˆå¼ºå¯†ç ]
â””â”€ å­˜å‚¨åœ¨ 1Password/Keychain

è´¦å· 2:
â”œâ”€ é‚®ç®±: lord-test@example.com
â””â”€ ...

è´¦å· 3:
â”œâ”€ é‚®ç®±: restore-test@example.com
â””â”€ ...

3. ä¿å­˜è´¦æˆ·ä¿¡æ¯åˆ°å®‰å…¨ä½ç½®
```

### âœ… Day 1 æ£€æŸ¥æ¸…å•

- [ ] è®¢é˜…ç»„å·²åˆ›å»º (earthlord_apocalypse_pass)
- [ ] 4 ä¸ªäº§å“å·²åˆ›å»º (äº§å“ ID ä¸ä»£ç åŒ¹é…)
- [ ] æ¯ä¸ªäº§å“å·²é…ç½®æœ¬åœ°åŒ–ä¿¡æ¯
- [ ] æ¯ä¸ªäº§å“å·²å¯ç”¨ 7 å¤©è¯•ç”¨æœŸ
- [ ] 3 ä¸ªæ²™ç›’æµ‹è¯•è´¦å·å·²åˆ›å»º
- [ ] è´¦æˆ·ä¿¡æ¯å·²å¦¥å–„ä¿å­˜

### ğŸ“ Day 1 å®Œæˆåå¯äº¤ä»˜ç‰©

- App Store Connect äº§å“é…ç½®æˆªå›¾
- æ²™ç›’æµ‹è¯•è´¦å·åˆ—è¡¨ (å¦¥å–„ä¿å­˜å¯†ç )

---

## ğŸ’¾ Day 2: æ•°æ®åº“è¿ç§» (2 å°æ—¶)

### ç›®æ ‡
- âœ… åœ¨ Supabase ä¸­åˆ›å»ºè¡¨
- âœ… é…ç½® RLS ç­–ç•¥
- âœ… éªŒè¯è¿ç§»æˆåŠŸ

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 2.1: è¿æ¥ Supabase (15 åˆ†é’Ÿ)

```
1. æ‰“å¼€ https://supabase.com
2. ç™»å½•é¡¹ç›®
3. å¯¼èˆªåˆ° SQL Editor
4. ç‚¹å‡» New Query
```

#### æ­¥éª¤ 2.2: æ‰§è¡Œè¿ç§» SQL (45 åˆ†é’Ÿ)

**å¤åˆ¶å®Œæ•´ SQL** (å‚è€ƒã€ŠğŸš€_EarthLord_è®¢é˜…ç³»ç»Ÿå®Œæ•´å¼€å‘æŒ‡å—.mdã€‹ç¬¬ä¹éƒ¨åˆ†)

```sql
-- ç²˜è´´ä»¥ä¸‹ SQL åˆ° Supabase SQL Editor

-- ===== åˆ›å»ºç”¨æˆ·è®¢é˜…è¡¨ =====
CREATE TABLE IF NOT EXISTS user_subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    product_id TEXT NOT NULL,
    tier TEXT NOT NULL CHECK (tier IN ('free', 'explorer', 'lord')),
    status TEXT NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'expired', 'cancelled', 'pending')),
    original_purchase_date TIMESTAMPTZ NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    is_trial BOOLEAN DEFAULT false,
    auto_renew BOOLEAN DEFAULT true,
    transaction_id TEXT,
    environment TEXT DEFAULT 'production',
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now()
);

-- ===== åˆ›å»ºç´¢å¼• =====
CREATE INDEX idx_user_subscriptions_user_id ON user_subscriptions(user_id);
CREATE INDEX idx_user_subscriptions_status_expires ON user_subscriptions(status, expires_at);

-- ===== è¡Œçº§å®‰å…¨ç­–ç•¥ =====
ALTER TABLE user_subscriptions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "users_view_own_subscription" ON user_subscriptions
    FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "users_insert_own_subscription" ON user_subscriptions
    FOR INSERT WITH CHECK (auth.uid() = user_id);

-- ===== å®¡è®¡æ—¥å¿—è¡¨ =====
CREATE TABLE IF NOT EXISTS subscription_audit_log (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    event_type TEXT NOT NULL,
    old_tier TEXT,
    new_tier TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_subscription_audit_user_id ON subscription_audit_log(user_id);
```

#### æ­¥éª¤ 2.3: éªŒè¯è¿ç§» (20 åˆ†é’Ÿ)

**åœ¨ Supabase SQL Editor ä¸­æ‰§è¡ŒéªŒè¯ SQL:**

```sql
-- æŸ¥çœ‹è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
SELECT EXISTS (
    SELECT FROM information_schema.tables 
    WHERE table_name = 'user_subscriptions'
);

-- åº”è¯¥è¿”å› true

-- æŸ¥çœ‹è¡¨ç»“æ„
\d user_subscriptions

-- æŸ¥çœ‹ç´¢å¼•
SELECT * FROM pg_indexes WHERE tablename = 'user_subscriptions';

-- éªŒè¯ RLS ç­–ç•¥
SELECT * FROM pg_policies WHERE tablename = 'user_subscriptions';
```

**é¢„æœŸç»“æœ**:
```
âœ… user_subscriptions è¡¨å·²åˆ›å»º
âœ… subscription_audit_log è¡¨å·²åˆ›å»º
âœ… 3 ä¸ªç´¢å¼•å·²åˆ›å»º
âœ… 4 ä¸ª RLS ç­–ç•¥å·²é…ç½®
```

### âš ï¸ å¸¸è§é—®é¢˜

**Q: æ‰§è¡Œ SQL æ—¶å‡ºç°é”™è¯¯?**
A: 
```
1. æ£€æŸ¥è¡¨æ˜¯å¦å·²å­˜åœ¨ï¼ˆä½¿ç”¨ IF NOT EXISTSï¼‰
2. æ¸…ç©º SQLï¼Œé‡æ–°ç²˜è´´
3. é€è¡Œæ‰§è¡Œï¼Œæ‰¾å‡ºé—®é¢˜ SQL
```

### âœ… Day 2 æ£€æŸ¥æ¸…å•

- [ ] user_subscriptions è¡¨å·²åˆ›å»º
- [ ] subscription_audit_log è¡¨å·²åˆ›å»º
- [ ] æ‰€æœ‰ç´¢å¼•å·²åˆ›å»º
- [ ] RLS ç­–ç•¥å·²é…ç½®
- [ ] éªŒè¯ SQL è¿”å›é¢„æœŸç»“æœ

---

## ğŸ› ï¸ Day 3: å®ç° IAPManager (6 å°æ—¶)

### ç›®æ ‡
- âœ… å®Œæˆ IAPModels.swift
- âœ… å®Œæˆ IAPManager.swift (æ ¸å¿ƒ)
- âœ… ä»£ç ç¼–è¯‘é€šè¿‡

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 3.1: åˆ›å»º IAPModels.swift (1 å°æ—¶)

**åˆ›å»ºæ–°æ–‡ä»¶**: `EarthLord/Models/IAPModels.swift`

**å¤åˆ¶å®Œæ•´ä»£ç ** (å‚è€ƒã€ŠğŸš€ å®Œæ•´å¼€å‘æŒ‡å—ã€‹ç¬¬ä¸‰éƒ¨åˆ†):

```swift
import Foundation

// ============ æšä¸¾å®šä¹‰ ============

enum SubscriptionTier: String, Codable {
    case free = "free"
    case explorer = "explorer"
    case lord = "lord"
    
    var displayName: String {
        switch self {
        case .free: return "å…è´¹ç”¨æˆ·"
        case .explorer: return "æ¢ç´¢è€…é€šè¡Œè¯"
        case .lord: return "é¢†ä¸»é€šè¡Œè¯"
        }
    }
}

enum SubscriptionPeriod: String, Codable {
    case monthly = "monthly"
    case yearly = "yearly"
    
    var displayName: String {
        switch self {
        case .monthly: return "æœˆåº¦"
        case .yearly: return "å¹´åº¦"
        }
    }
}

enum SubscriptionStatus: String, Codable {
    case active = "active"
    case expired = "expired"
    case cancelled = "cancelled"
    case pending = "pending"
}

enum SubscriptionError: LocalizedError {
    case productNotFound
    case purchaseFailed(String)
    case verificationFailed
    case networkError
    case databaseError(String)
    
    var errorDescription: String? {
        switch self {
        case .productNotFound: return "äº§å“æœªæ‰¾åˆ°"
        case .purchaseFailed(let msg): return "è´­ä¹°å¤±è´¥: \(msg)"
        case .verificationFailed: return "éªŒè¯å¤±è´¥"
        case .networkError: return "ç½‘ç»œé”™è¯¯"
        case .databaseError(let msg): return "æ•°æ®åº“é”™è¯¯: \(msg)"
        }
    }
}

// ============ æƒç›Šé…ç½® ============

struct SubscriptionBenefits: Codable {
    let dailyExplorationLimit: Int
    let searchRangeKm: Double
    let backpackCapacity: Int
    let buildSpeedMultiplier: Double
    let dailyTradeLimit: Int
    let monthlyMaterialRewards: Int
    let hasExclusiveBadge: Bool
    let prioritySupport: Bool
    
    static let free = SubscriptionBenefits(
        dailyExplorationLimit: 10,
        searchRangeKm: 1.0,
        backpackCapacity: 100,
        buildSpeedMultiplier: 1.0,
        dailyTradeLimit: 10,
        monthlyMaterialRewards: 0,
        hasExclusiveBadge: false,
        prioritySupport: false
    )
    
    static let explorer = SubscriptionBenefits(
        dailyExplorationLimit: -1,     // æ— é™
        searchRangeKm: 2.0,
        backpackCapacity: 200,
        buildSpeedMultiplier: 2.0,
        dailyTradeLimit: -1,
        monthlyMaterialRewards: 12,
        hasExclusiveBadge: true,
        prioritySupport: true
    )
    
    static let lord = SubscriptionBenefits(
        dailyExplorationLimit: -1,
        searchRangeKm: 2.0,
        backpackCapacity: 300,
        buildSpeedMultiplier: 2.0,
        dailyTradeLimit: -1,
        monthlyMaterialRewards: 18,
        hasExclusiveBadge: true,
        prioritySupport: true
    )
}

// ============ äº§å“é…ç½® ============

struct SubscriptionProduct: Identifiable {
    let id: String
    let tier: SubscriptionTier
    let period: SubscriptionPeriod
    let price: Decimal
    let displayName: String
    let description: String
    
    var trialDays: Int { 7 }
    var benefits: SubscriptionBenefits { tier.benefits }
}

// ============ æ•°æ®åº“æ¨¡å‹ ============

struct DBUserSubscription: Identifiable, Codable {
    let id: UUID
    let userId: UUID
    let productId: String
    let tier: SubscriptionTier
    let status: SubscriptionStatus
    let originalPurchaseDate: Date
    let expiresAt: Date
    let isTrial: Bool
    let autoRenew: Bool
    let transactionId: String?
    let environment: String
    let createdAt: Date
    let updatedAt: Date
    
    var isExpired: Bool { Date() > expiresAt }
    var isTrialPeriod: Bool { isTrial && Date() < expiresAt }
    
    // ä¿®å¤åçš„å‰©ä½™æ—¶é—´è®¡ç®—ï¼ˆè§£å†³æ²™ç›’ 0 å¤©é—®é¢˜ï¼‰
    var remainingDays: Int? {
        guard expiresAt > Date() else { return 0 }
        let remainingSeconds = expiresAt.timeIntervalSince(Date())
        return max(1, Int(ceil(remainingSeconds / 86400)))
    }
    
    var formattedRemainingTime: String {
        let remaining = expiresAt.timeIntervalSince(Date())
        if remaining < 60 { return "å‰©ä½™ \(Int(remaining)) ç§’" }
        if remaining < 3600 { return "å‰©ä½™ \(Int(remaining / 60)) åˆ†é’Ÿ" }
        if remaining < 86400 { return "å‰©ä½™ \(Int(remaining / 3600)) å°æ—¶" }
        return "å‰©ä½™ \(Int(ceil(remaining / 86400))) å¤©"
    }
}

// ============ å¸¸é‡ ============

let subscriptionGroupId = "earthlord_apocalypse_pass"

let subscriptionProductIds = Set([
    "com.earthlord.sub.explorer.monthly",
    "com.earthlord.sub.explorer.yearly",
    "com.earthlord.sub.lord.monthly",
    "com.earthlord.sub.lord.yearly"
])
```

#### æ­¥éª¤ 3.2: åˆ›å»º IAPManager.swift (4 å°æ—¶)

**åˆ›å»ºæ–°æ–‡ä»¶**: `EarthLord/Managers/IAPManager.swift`

**å¤åˆ¶å®Œæ•´ä»£ç ** (å‚è€ƒã€ŠğŸš€ å®Œæ•´å¼€å‘æŒ‡å—ã€‹ç¬¬ä¸‰éƒ¨åˆ†):

```swift
import StoreKit
import Supabase

@MainActor
class IAPManager: NSObject, ObservableObject {
    static let shared = IAPManager()
    
    // ========== å‘å¸ƒå±æ€§ ==========
    @Published var subscriptionProducts: [SubscriptionProduct] = []
    @Published var activeSubscription: DBUserSubscription?
    @Published var subscriptionTier: SubscriptionTier = .free
    @Published var isLoading = false
    @Published var error: SubscriptionError?
    
    // ========== ç§æœ‰å±æ€§ ==========
    private var updateTask: Task<Void, Never>?
    private let supabaseClient = SupabaseClient()
    
    // MARK: - åˆå§‹åŒ–ä¸ç›‘å¬
    
    override init() {
        super.init()
        setupTransactionListener()
    }
    
    private func setupTransactionListener() {
        updateTask = Task(priority: .background) {
            for await result in Transaction.updates {
                await self.handleTransaction(result)
            }
        }
    }
    
    deinit {
        updateTask?.cancel()
    }
    
    // MARK: - äº§å“åŠ è½½
    
    func loadSubscriptionProducts() async {
        isLoading = true
        defer { isLoading = false }
        
        do {
            let products = try await Product.products(for: subscriptionProductIds)
            print("âœ… æˆåŠŸåŠ è½½ \(products.count) ä¸ªè®¢é˜…äº§å“")
            
            var subscriptionProducts: [SubscriptionProduct] = []
            for product in products.sorted(by: { $0.price > $1.price }) {
                let tier = extractTier(from: product.id)
                let period = extractPeriod(from: product.id)
                
                let subProduct = SubscriptionProduct(
                    id: product.id,
                    tier: tier,
                    period: period,
                    price: product.price,
                    displayName: product.displayName,
                    description: product.description
                )
                subscriptionProducts.append(subProduct)
                
                print("  - \(subProduct.displayName): Â¥\(product.price)/\(period.displayName)")
            }
            
            self.subscriptionProducts = subscriptionProducts
        } catch {
            self.error = .networkError
            print("âŒ åŠ è½½è®¢é˜…äº§å“å¤±è´¥: \(error)")
        }
    }
    
    // MARK: - è®¢é˜…çŠ¶æ€æ£€æŸ¥
    
    func loadActiveSubscription() async {
        do {
            guard let userId = supabaseClient.auth.currentSession?.user.id else {
                self.subscriptionTier = .free
                print("âš ï¸ ç”¨æˆ·æœªç™»å½•")
                return
            }
            
            // ä»æ•°æ®åº“åŠ è½½
            let subscription = try await supabaseClient
                .from("user_subscriptions")
                .select("*")
                .eq("user_id", value: userId.uuidString)
                .eq("status", value: "active")
                .single()
                .execute()
                .value as? [String: Any]
            
            if let subscription = subscription {
                let tier = SubscriptionTier(
                    rawValue: subscription["tier"] as? String ?? "free"
                ) ?? .free
                self.subscriptionTier = tier
                print("âœ… å·²åŠ è½½è®¢é˜…: \(tier.displayName)")
            } else {
                self.subscriptionTier = .free
            }
        } catch {
            self.subscriptionTier = .free
            print("âŒ åŠ è½½è®¢é˜…å¤±è´¥: \(error)")
        }
    }
    
    // MARK: - è´­ä¹°ä¸äº¤æ˜“å¤„ç†
    
    func purchaseSubscription(_ product: SubscriptionProduct) async -> Bool {
        do {
            guard let storeProduct = try await Product(id: product.id) else {
                self.error = .productNotFound
                return false
            }
            
            let result = try await storeProduct.purchase()
            
            switch result {
            case .success(let verificationResult):
                await handleTransaction(verificationResult)
                return true
            case .userCancelled:
                print("âš ï¸ ç”¨æˆ·å–æ¶ˆè´­ä¹°")
                return false
            case .pending:
                print("â³ è´­ä¹°å¾…å®¡æ ¸")
                return false
            @unknown default:
                return false
            }
        } catch {
            self.error = .purchaseFailed(error.localizedDescription)
            print("âŒ è´­ä¹°å¤±è´¥: \(error)")
            return false
        }
    }
    
    private func handleTransaction(
        _ result: VerificationResult<Transaction>
    ) async {
        switch result {
        case .verified(let transaction):
            // ğŸ”‘ å…³é”®ï¼šåŒºåˆ†è®¢é˜…å’Œæ¶ˆè€—å“
            if subscriptionProductIds.contains(transaction.productID) {
                await handleSubscriptionTransaction(transaction)
            }
            await transaction.finish()
            
        case .unverified(let transaction, let error):
            print("âŒ äº¤æ˜“éªŒè¯å¤±è´¥: \(error)")
            await transaction.finish()
        }
    }
    
    private func handleSubscriptionTransaction(_ transaction: Transaction) async {
        do {
            guard let userId = supabaseClient.auth.currentSession?.user.id else {
                return
            }
            
            let tier = extractTier(from: transaction.productID)
            let expirationDate = transaction.expirationDate ?? Date()
            
            let subscription = [
                "user_id": userId.uuidString,
                "product_id": transaction.productID,
                "tier": tier.rawValue,
                "status": "active",
                "original_purchase_date": Date().ISO8601Format(),
                "expires_at": expirationDate.ISO8601Format(),
                "is_trial": transaction.isTrialConversion ?? false,
                "auto_renew": true,
                "transaction_id": String(transaction.id),
                "environment": "production"
            ] as [String: Any]
            
            try await supabaseClient
                .from("user_subscriptions")
                .upsert(subscription, onConflict: "user_id")
                .execute()
            
            self.subscriptionTier = tier
            
            print("âœ… è®¢é˜… \(tier.displayName) è´­ä¹°æˆåŠŸï¼Œåˆ°æœŸ: \(expirationDate)")
        } catch {
            print("âŒ ä¿å­˜è®¢é˜…å¤±è´¥: \(error)")
        }
    }
    
    // MARK: - æ¢å¤ä¸ç®¡ç†
    
    func restoreSubscriptions() async {
        do {
            try await AppStore.sync()
            await loadActiveSubscription()
            print("âœ… æ¢å¤è´­ä¹°æˆåŠŸ")
        } catch {
            print("âŒ æ¢å¤è´­ä¹°å¤±è´¥: \(error)")
        }
    }
    
    func openSubscriptionManagement() {
        if let url = URL(string: "https://apps.apple.com/account/subscriptions") {
            UIApplication.shared.open(url)
        }
    }
    
    // MARK: - å·¥å…·æ–¹æ³•
    
    private func extractTier(from productId: String) -> SubscriptionTier {
        if productId.contains("lord") { return .lord }
        if productId.contains("explorer") { return .explorer }
        return .free
    }
    
    private func extractPeriod(from productId: String) -> SubscriptionPeriod {
        if productId.contains("yearly") { return .yearly }
        return .monthly
    }
}
```

#### æ­¥éª¤ 3.3: ä»£ç ç¼–è¯‘æ£€æŸ¥ (1 å°æ—¶)

```bash
# åœ¨ Xcode ä¸­ç¼–è¯‘
Command + B (ç¼–è¯‘)

# æ£€æŸ¥ç»“æœ
â””â”€ æ²¡æœ‰é”™è¯¯å’Œè­¦å‘Š âœ…
â””â”€ æœ‰é”™è¯¯? æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®æ”¹ä»£ç 
```

**å¸¸è§ç¼–è¯‘é”™è¯¯ä¸ä¿®å¤**:

| é”™è¯¯ | åŸå›  | ä¿®å¤ |
|------|------|------|
| `SupabaseClient not found` | ç¼ºå°‘ Supabase å¯¼å…¥ | åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  `import Supabase` |
| `Product not found` | iOS 16+ æ‰æœ‰ StoreKit 2 | æ£€æŸ¥æœ€ä½éƒ¨ç½²ç›®æ ‡ â‰¥ iOS 16 |
| `Cannot find 'UIApplication'` | ç¼ºå°‘ UIKit | æ·»åŠ  `import UIKit` |
| ç±»å‹ä¸åŒ¹é… | Decimal vs Double | ä½¿ç”¨ `Decimal(string: "")` åˆå§‹åŒ– |

### âœ… Day 3 æ£€æŸ¥æ¸…å•

- [ ] IAPModels.swift å·²åˆ›å»º
- [ ] IAPManager.swift å·²åˆ›å»º
- [ ] ä»£ç ç¼–è¯‘é€šè¿‡ (0 errors, 0 warnings)
- [ ] æ‰€æœ‰å¸¸é‡å®šä¹‰æ­£ç¡®

---

## ğŸ¨ Day 4: åˆ›å»º UI è§†å›¾ (4 å°æ—¶)

### ç›®æ ‡
- âœ… å®Œæˆ SubscriptionView.swift
- âœ… å®Œæˆ SubscriptionCard.swift
- âœ… å®Œæˆ SubscriptionBenefitsView.swift

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 4.1: åˆ›å»º SubscriptionView (1.5 å°æ—¶)

**æ–‡ä»¶**: `EarthLord/Views/SubscriptionView.swift`

```swift
import SwiftUI

struct SubscriptionView: View {
    @StateObject private var iapManager = IAPManager.shared
    @State private var showAlert = false
    @State private var alertMessage = ""
    
    var body: some View {
        NavigationStack {
            VStack(spacing: 16) {
                // ========== å½“å‰è®¢é˜…çŠ¶æ€ ==========
                CurrentSubscriptionCard(tier: iapManager.subscriptionTier)
                
                // ========== äº§å“åˆ—è¡¨ ==========
                ScrollView {
                    VStack(spacing: 12) {
                        ForEach(iapManager.subscriptionProducts) { product in
                            SubscriptionCard(
                                product: product,
                                isCurrentPlan: iapManager.subscriptionTier == product.tier,
                                onPurchase: {
                                    Task {
                                        let success = await iapManager.purchaseSubscription(product)
                                        alertMessage = success ? "è®¢é˜…æˆåŠŸï¼" : "è®¢é˜…å¤±è´¥ï¼Œè¯·é‡è¯•"
                                        showAlert = true
                                    }
                                }
                            )
                        }
                    }
                    .padding()
                }
                
                // ========== æƒç›Šå¯¹æ¯”è¡¨ ==========
                SubscriptionBenefitsView()
                
                // ========== åº•éƒ¨æŒ‰é’® ==========
                HStack(spacing: 12) {
                    Button(action: {
                        Task {
                            await iapManager.restoreSubscriptions()
                            alertMessage = "æ¢å¤å®Œæˆ"
                            showAlert = true
                        }
                    }) {
                        Label("æ¢å¤è´­ä¹°", systemImage: "arrow.counterclockwise")
                    }
                    .buttonStyle(.bordered)
                    
                    Button(action: {
                        iapManager.openSubscriptionManagement()
                    }) {
                        Label("ç®¡ç†è®¢é˜…", systemImage: "gearshape.fill")
                    }
                    .buttonStyle(.bordered)
                }
                .padding()
            }
            .navigationTitle("æœ«æ—¥é€šè¡Œè¯")
            .navigationBarTitleDisplayMode(.inline)
        }
        .alert("æç¤º", isPresented: $showAlert) {
            Button("ç¡®å®š") { }
        } message: {
            Text(alertMessage)
        }
        .task {
            await iapManager.loadSubscriptionProducts()
            await iapManager.loadActiveSubscription()
        }
    }
}

// ========== å½“å‰è®¢é˜…å¡ç‰‡ ==========

struct CurrentSubscriptionCard: View {
    let tier: SubscriptionTier
    
    var body: some View {
        VStack(alignment: .leading, spacing: 8) {
            HStack {
                Text("å½“å‰çŠ¶æ€")
                    .font(.headline)
                Spacer()
                Image(systemName: "crown.fill")
                    .foregroundColor(.yellow)
            }
            
            Text(tier.displayName)
                .font(.title3)
                .fontWeight(.bold)
            
            Text(tier == .free ? "å‡çº§äº«å—ç‰¹æƒ" : "æ„Ÿè°¢æ‚¨çš„æ”¯æŒ")
                .font(.caption)
                .foregroundColor(.secondary)
        }
        .padding()
        .background(Color(.systemGray6))
        .cornerRadius(12)
        .padding()
    }
}

#Preview {
    SubscriptionView()
}
```

#### æ­¥éª¤ 4.2: åˆ›å»º SubscriptionCard (1 å°æ—¶)

**æ–‡ä»¶**: `EarthLord/Views/SubscriptionCard.swift`

```swift
import SwiftUI

struct SubscriptionCard: View {
    let product: SubscriptionProduct
    let isCurrentPlan: Bool
    let onPurchase: () -> Void
    
    var body: some View {
        VStack(alignment: .leading, spacing: 12) {
            // æ ‡é¢˜å’Œæ ‡ç­¾
            HStack {
                VStack(alignment: .leading, spacing: 4) {
                    Text(product.displayName)
                        .font(.headline)
                    
                    Text(product.period.displayName)
                        .font(.caption)
                        .foregroundColor(.secondary)
                }
                
                Spacer()
                
                if isCurrentPlan {
                    Text("å½“å‰è®¡åˆ’")
                        .font(.caption)
                        .padding(.horizontal, 8)
                        .padding(.vertical, 4)
                        .background(Color.green)
                        .foregroundColor(.white)
                        .cornerRadius(4)
                }
            }
            
            // ä»·æ ¼
            HStack {
                Text("Â¥\(product.price.description)")
                    .font(.title2)
                    .fontWeight(.bold)
                
                Text("/\(product.period == .monthly ? "æœˆ" : "å¹´")")
                    .foregroundColor(.secondary)
                
                Spacer()
                
                if product.period == .yearly {
                    Text("çœ \(savingsPercentage)%")
                        .font(.caption)
                        .foregroundColor(.green)
                        .fontWeight(.bold)
                }
            }
            
            // æè¿°
            Text(product.description)
                .font(.caption)
                .foregroundColor(.secondary)
                .lineLimit(3)
            
            // è´­ä¹°æŒ‰é’®
            Button(action: onPurchase) {
                Text(isCurrentPlan ? "å·²è®¢é˜…" : "ç«‹å³è®¢é˜…")
                    .frame(maxWidth: .infinity)
                    .padding(.vertical, 12)
                    .background(isCurrentPlan ? Color.gray : Color.blue)
                    .foregroundColor(.white)
                    .cornerRadius(8)
                    .font(.headline)
            }
            .disabled(isCurrentPlan)
        }
        .padding()
        .background(Color(.systemGray6))
        .cornerRadius(12)
    }
    
    // è®¡ç®—å¹´åº¦æŠ˜æ‰£ç™¾åˆ†æ¯”
    var savingsPercentage: Int {
        if product.tier == .explorer {
            return 39  // (12*12 - 88) / (12*12) * 100 = 39%
        } else {
            return 44  // (25*12 - 168) / (25*12) * 100 = 44%
        }
    }
}

#Preview {
    SubscriptionCard(
        product: SubscriptionProduct(
            id: "test",
            tier: .explorer,
            period: .monthly,
            price: 12,
            displayName: "æ¢ç´¢è€…é€šè¡Œè¯",
            description: "æ¯æ—¥æ¢ç´¢æ— é™æ¬¡"
        ),
        isCurrentPlan: false,
        onPurchase: {}
    )
}
```

#### æ­¥éª¤ 4.3: åˆ›å»ºæƒç›Šå¯¹æ¯”è¡¨ (1.5 å°æ—¶)

**æ–‡ä»¶**: `EarthLord/Views/SubscriptionBenefitsView.swift`

```swift
import SwiftUI

struct SubscriptionBenefitsView: View {
    let benefits: [(label: String, free: String, explorer: String, lord: String)] = [
        ("æ¢ç´¢æ¬¡æ•°", "10 æ¬¡/å¤©", "æ— é™", "æ— é™"),
        ("æœç´¢èŒƒå›´", "1 km", "2 km", "2 km"),
        ("èƒŒåŒ…å®¹é‡", "100 æ ¼", "200 æ ¼", "300 æ ¼"),
        ("å»ºé€ é€Ÿåº¦", "1x", "2x", "2x"),
        ("äº¤æ˜“æ¬¡æ•°", "10 æ¬¡/å¤©", "æ— é™", "æ— é™"),
        ("æœˆåº¦ç¤¼åŒ…", "æ— ", "Â¥12", "Â¥18"),
        ("ä¸“å±å¾½ç« ", "æ— ", "âœ“", "âœ“"),
        ("å®¢æœæ”¯æŒ", "æ™®é€š", "ä¼˜å…ˆ", "VIP"),
    ]
    
    var body: some View {
        VStack(alignment: .leading, spacing: 12) {
            Text("æƒç›Šå¯¹æ¯”")
                .font(.headline)
                .padding(.horizontal)
            
            VStack(spacing: 0) {
                // è¡¨å¤´
                HStack(spacing: 0) {
                    Text("æƒç›Š").frame(maxWidth: .infinity, alignment: .leading)
                    Text("å…è´¹").frame(width: 60)
                    Text("æ¢ç´¢è€…").frame(width: 60)
                    Text("é¢†ä¸»").frame(width: 60)
                }
                .font(.caption)
                .fontWeight(.bold)
                .padding(8)
                .background(Color(.systemGray5))
                
                // æ•°æ®è¡Œ
                ForEach(0..<benefits.count, id: \.self) { index in
                    let benefit = benefits[index]
                    HStack(spacing: 0) {
                        Text(benefit.label).frame(maxWidth: .infinity, alignment: .leading)
                        Text(benefit.free).frame(width: 60)
                        Text(benefit.explorer).frame(width: 60).foregroundColor(.blue)
                        Text(benefit.lord).frame(width: 60).foregroundColor(.purple)
                    }
                    .font(.caption)
                    .padding(8)
                    .background(index.isMultiple(of: 2) ? Color(.systemBackground) : Color(.systemGray6))
                }
            }
            .cornerRadius(8)
            .padding(.horizontal)
        }
        .padding()
    }
}

#Preview {
    SubscriptionBenefitsView()
}
```

#### æ­¥éª¤ 4.4: åœ¨ ProfileTab ä¸­æ·»åŠ å…¥å£ (1 å°æ—¶)

**ç¼–è¾‘**: `EarthLord/Views/ProfileTabView.swift`

```swift
// åœ¨ç°æœ‰ ProfileTabView ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

struct ProfileTabView: View {
    var body: some View {
        NavigationStack {
            List {
                // ========== ğŸ‘‘ è®¢é˜…å¡ç‰‡å…¥å£ - æ·»åŠ åœ¨æœ€ä¸Šé¢ ==========
                NavigationLink(destination: SubscriptionView()) {
                    HStack {
                        Image(systemName: "crown.fill")
                            .foregroundColor(.yellow)
                            .font(.title3)
                        
                        VStack(alignment: .leading, spacing: 4) {
                            Text("æœ«æ—¥é€šè¡Œè¯")
                                .font(.headline)
                            
                            Text("å‡çº§äº«å—ç‰¹æƒï¼Œå»ºé€ é€Ÿåº¦ç¿»å€")
                                .font(.caption)
                                .foregroundColor(.secondary)
                        }
                        
                        Spacer()
                        
                        Image(systemName: "chevron.right")
                            .foregroundColor(.gray)
                    }
                    .padding(.vertical, 8)
                }
                .listRowSeparator(.hidden)
                
                // ========== å…¶ä»–ç°æœ‰é¡¹ç›® ==========
                // ... ä¿æŒåŸæœ‰ä»£ç 
            }
        }
    }
}
```

### âœ… Day 4 æ£€æŸ¥æ¸…å•

- [ ] SubscriptionView.swift å·²åˆ›å»º
- [ ] SubscriptionCard.swift å·²åˆ›å»º
- [ ] SubscriptionBenefitsView.swift å·²åˆ›å»º
- [ ] ProfileTabView å·²æ›´æ–°ï¼ˆæ·»åŠ å…¥å£ï¼‰
- [ ] UI ç¼–è¯‘é€šè¿‡ï¼Œæ— æŠ¥é”™

---

## ğŸ”— Day 5: æƒç›Šé›†æˆ & ä»£ç æµ‹è¯• (6 å°æ—¶)

### ç›®æ ‡
- âœ… é›†æˆæƒç›Šåˆ°å„ä¸ª Manager
- âœ… å®Œæˆä»£ç æµ‹è¯•
- âœ… ä¿®å¤é›†æˆé—®é¢˜

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 5.1: æ‰©å±• InventoryManager (1.5 å°æ—¶)

**ç¼–è¾‘**: `EarthLord/Managers/InventoryManager.swift`

```swift
// åœ¨ class InventoryManager: ObservableObject ä¸­æ·»åŠ ï¼š

extension InventoryManager {
    /// è·å–èƒŒåŒ…æœ€å¤§å®¹é‡ï¼ˆæ ¹æ®è®¢é˜…ç­‰çº§ï¼‰
    var maxCapacity: Int {
        switch IAPManager.shared.subscriptionTier {
        case .free: return 100
        case .explorer: return 200
        case .lord: return 300
        }
    }
    
    /// æ£€æŸ¥èƒŒåŒ…æ˜¯å¦å·²æ»¡
    func isInventoryFull(itemCount: Int) -> Bool {
        return itemCount >= maxCapacity
    }
    
    /// å¼‚æ­¥åŠ è½½ç©å®¶èƒŒåŒ…ï¼ˆç¡®ä¿æƒç›ŠåŒæ­¥ï¼‰
    func loadPlayerInventory() async {
        // 1ï¸âƒ£ å…ˆç¡®ä¿è®¢é˜…çŠ¶æ€æœ€æ–°
        await IAPManager.shared.loadActiveSubscription()
        
        // 2ï¸âƒ£ å†æŒ‰æœ€æ–°æƒç›ŠåŠ è½½
        // ... åŠ è½½èƒŒåŒ…é€»è¾‘ï¼Œä½¿ç”¨ maxCapacity
    }
}
```

#### æ­¥éª¤ 5.2: æ‰©å±• BuildingManager (1.5 å°æ—¶)

**ç¼–è¾‘**: `EarthLord/Managers/BuildingManager.swift`

```swift
// åœ¨ class BuildingManager: ObservableObject ä¸­æ·»åŠ ï¼š

extension BuildingManager {
    /// è·å–å»ºé€ é€Ÿåº¦å€æ•°
    var buildSpeedMultiplier: Double {
        switch IAPManager.shared.subscriptionTier {
        case .free: return 1.0
        case .explorer: return 2.0
        case .lord: return 2.0
        }
    }
    
    /// è®¡ç®—å®é™…å»ºé€ æ—¶é—´ï¼ˆç§’ï¼‰
    func getActualBuildTime(baseSeconds: TimeInterval) -> TimeInterval {
        return baseSeconds / buildSpeedMultiplier
    }
    
    /// è·å–å»ºé€ åŠ é€Ÿæ˜¾ç¤ºç™¾åˆ†æ¯”
    var speedBoost: Int {
        return Int((buildSpeedMultiplier - 1.0) * 100)
    }
}
```

#### æ­¥éª¤ 5.3: æ‰©å±• ExplorationManager (1.5 å°æ—¶)

**ç¼–è¾‘**: `EarthLord/Managers/ExplorationManager.swift`

```swift
// åœ¨ class ExplorationManager: ObservableObject ä¸­æ·»åŠ ï¼š

extension ExplorationManager {
    /// æ¯æ—¥æ¢ç´¢æ¬¡æ•°ä¸Šé™
    var dailyExplorationLimit: Int {
        switch IAPManager.shared.subscriptionTier {
        case .free: return 10
        case .explorer: return Int.max  // æ— é™
        case .lord: return Int.max
        }
    }
    
    /// åºŸå¢Ÿæœç´¢èŒƒå›´ï¼ˆå•ä½: kmï¼‰
    var searchRangeKm: Double {
        switch IAPManager.shared.subscriptionTier {
        case .free: return 1.0
        case .explorer: return 2.0
        case .lord: return 2.0
        }
    }
    
    /// æ£€æŸ¥ä»Šæ—¥æ¢ç´¢æ¬¡æ•°æ˜¯å¦è¶…é™
    func canExplore() -> Bool {
        if dailyExplorationLimit == Int.max { return true }
        let used = getUsedExplorationCount()
        return used < dailyExplorationLimit
    }
    
    /// è·å–å‰©ä½™æ¢ç´¢æ¬¡æ•°
    func getRemainingExplorations() -> Int {
        if dailyExplorationLimit == Int.max { return -1 }  // -1 è¡¨ç¤ºæ— é™
        return max(0, dailyExplorationLimit - getUsedExplorationCount())
    }
}
```

#### æ­¥éª¤ 5.4: æ‰©å±• TradeManager (1.5 å°æ—¶)

**ç¼–è¾‘**: `EarthLord/Managers/TradeManager.swift`

```swift
// åœ¨ class TradeManager: ObservableObject ä¸­æ·»åŠ ï¼š

extension TradeManager {
    /// æ¯æ—¥äº¤æ˜“æ¬¡æ•°ä¸Šé™
    var dailyTradeLimit: Int {
        switch IAPManager.shared.subscriptionTier {
        case .free: return 10
        case .explorer: return Int.max  // æ— é™
        case .lord: return Int.max
        }
    }
    
    /// æ£€æŸ¥èƒ½å¦å‘èµ·äº¤æ˜“
    func canCreateOffer() -> Bool {
        if dailyTradeLimit == Int.max { return true }
        let used = getUsedTradeCount()
        return used < dailyTradeLimit
    }
    
    /// è·å–å‰©ä½™äº¤æ˜“æ¬¡æ•°
    func getRemainingTrades() -> Int {
        if dailyTradeLimit == Int.max { return -1 }
        return max(0, dailyTradeLimit - getUsedTradeCount())
    }
}
```

#### æ­¥éª¤ 5.5: ä»£ç ç¼–è¯‘ & æµ‹è¯• (1 å°æ—¶)

```bash
# åœ¨ Xcode ä¸­ç¼–è¯‘
Command + B

# ä¿®å¤æ‰€æœ‰ç¼–è¯‘é”™è¯¯

# è¿è¡Œåº”ç”¨
Command + R

# æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤
â”œâ”€ 1. æ‰“å¼€åº”ç”¨ï¼Œè¿›å…¥ ProfileTab
â”œâ”€ 2. ç‚¹å‡»"æœ«æ—¥é€šè¡Œè¯"å…¥å£
â”œâ”€ 3. ç¡®è®¤è®¢é˜…ç•Œé¢æ˜¾ç¤ºæ­£å¸¸
â”œâ”€ 4. æ˜¾ç¤ºäº§å“åˆ—è¡¨ï¼ˆ4 ä¸ªäº§å“ï¼‰
â”œâ”€ 5. æ˜¾ç¤ºæƒç›Šå¯¹æ¯”è¡¨
â””â”€ 6. æ— å´©æºƒæ—¥å¿—
```

**æµ‹è¯•æ—¥å¿—æ£€æŸ¥**:
```
âœ… åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—:
âœ… æˆåŠŸåŠ è½½ 4 ä¸ªè®¢é˜…äº§å“
âœ… å·²åŠ è½½è®¢é˜…: å…è´¹ç”¨æˆ· (æˆ–å…¶ä»–ç­‰çº§)
âœ… InventoryManager: èƒŒåŒ…å®¹é‡ = 100

âŒ ä¸åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—:
âŒ Fatal error
âŒ Thread 1: Fatal error: Unexpectedly found nil
âŒ Cannot find product
```

### âœ… Day 5 æ£€æŸ¥æ¸…å•

- [ ] InventoryManager å·²æ‰©å±•
- [ ] BuildingManager å·²æ‰©å±•
- [ ] ExplorationManager å·²æ‰©å±•
- [ ] TradeManager å·²æ‰©å±•
- [ ] ä»£ç ç¼–è¯‘é€šè¿‡
- [ ] è¿è¡Œæ— å´©æºƒ

---

## ğŸ§ª Day 6: æ²™ç›’æµ‹è¯• & é—®é¢˜ä¿®å¤ (4 å°æ—¶)

### ç›®æ ‡
- âœ… å®Œæˆ 8 ä¸ªæ²™ç›’æµ‹è¯•åœºæ™¯
- âœ… ä¿®å¤å‘ç°çš„é—®é¢˜
- âœ… éªŒè¯æ‰€æœ‰æƒç›Šç”Ÿæ•ˆ

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 6.1: æ²™ç›’ç¯å¢ƒè®¾ç½® (30 åˆ†é’Ÿ)

```
1. åœ¨ iPhone/æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€è®¾ç½®
   Settings > App Store > Sign Out

2. ä½¿ç”¨æ²™ç›’æµ‹è¯•è´¦å·ç™»å½•
   Settings > App Store > Sign In
   é‚®ç®±: explorer-test@example.com
   å¯†ç : [Day 1 åˆ›å»ºçš„å¯†ç ]

3. ç¡®è®¤ç™»å½•æˆåŠŸ
   Settings > App Store > æ˜¾ç¤ºæµ‹è¯•è´¦å·é‚®ç®±
```

#### æ­¥éª¤ 6.2: æ‰§è¡Œ 8 ä¸ªæµ‹è¯•åœºæ™¯ (3 å°æ—¶ 30 åˆ†é’Ÿ)

**åœºæ™¯ 1ï¸âƒ£: æ–°ç”¨æˆ·è´­ä¹°æœˆåº¦è®¢é˜…**

```
æµ‹è¯•æ­¥éª¤:
1. æ‰“å¼€åº”ç”¨ > ProfileTab > æœ«æ—¥é€šè¡Œè¯
2. é€‰æ‹©"æ¢ç´¢è€…é€šè¡Œè¯ - æœˆåº¦" (Â¥12/æœˆ)
3. ç‚¹å‡»"ç«‹å³è®¢é˜…"
4. = ç³»ç»Ÿå¼¹å‡ºæ”¯ä»˜çª—å£
5. = ç¡®è®¤è´­ä¹°
6. = æ”¯ä»˜æˆåŠŸ

é¢„æœŸç»“æœ âœ… :
âœ“ æ”¯ä»˜æˆåŠŸæç¤º
âœ“ æ˜¾ç¤º"å½“å‰: æ¢ç´¢è€…é€šè¡Œè¯"
âœ“ æ˜¾ç¤ºåˆ°æœŸæ—¶é—´ï¼ˆ5 åˆ†é’Ÿåï¼‰
âœ“ èƒŒåŒ…å®¹é‡å˜ä¸º 200 æ ¼
âœ“ å»ºé€ é€Ÿåº¦æ˜¾ç¤º 2x
âœ“ æ¢ç´¢æ¬¡æ•°æ˜¾ç¤º"æ— é™"

è°ƒè¯•æ—¥å¿—:
ä½ åº”è¯¥çœ‹åˆ°:
"âœ… è®¢é˜… æ¢ç´¢è€…é€šè¡Œè¯ è´­ä¹°æˆåŠŸ"
"âœ… å·²åŠ è½½è®¢é˜…: æ¢ç´¢è€…é€šè¡Œè¯"
```

**åœºæ™¯ 2ï¸âƒ£: å‡çº§åˆ°é«˜ç­‰çº§**

```
å‰æ: å·²è´­ä¹°"æ¢ç´¢è€…æœˆåº¦"

æµ‹è¯•æ­¥éª¤:
1. è¿›å…¥è®¢é˜…ç•Œé¢
2. é€‰æ‹©"é¢†ä¸»é€šè¡Œè¯ - æœˆåº¦" (Â¥25/æœˆ)
3. ç‚¹å‡»"ç«‹å³è®¢é˜…"
4. ç³»ç»Ÿæ˜¾ç¤ºå·®ä»·è®¡ç®—
5. ç¡®è®¤æ”¯ä»˜
6. å‡çº§æˆåŠŸ

é¢„æœŸç»“æœ âœ… :
âœ“ è‡ªåŠ¨è®¡ç®—å·®ä»·
âœ“ æ˜¾ç¤º"å½“å‰: é¢†ä¸»é€šè¡Œè¯"
âœ“ èƒŒåŒ…å®¹é‡å˜ä¸º 300 æ ¼
âœ“ æƒç›Šç«‹å³æ›´æ–°
```

**åœºæ™¯ 3ï¸âƒ£: è‡ªåŠ¨ç»­è´¹**

```
å‰æ: å·²è´­ä¹°æœˆåº¦è®¢é˜…

æµ‹è¯•æ­¥éª¤:
1. è®°å½•å½“å‰è®¢é˜…çŠ¶æ€å’Œåˆ°æœŸæ—¶é—´
2. ç­‰å¾… 5 åˆ†é’Ÿ (æ²™ç›’æ—¶é—´åŠ é€Ÿ: 1 æœˆ = 5 åˆ†é’Ÿ)
3. åˆ·æ–°åº”ç”¨ï¼Œæ£€æŸ¥åˆ°æœŸæ—¶é—´
4. è®¢é˜…åº”è¯¥è‡ªåŠ¨ç»­è´¹

é¢„æœŸç»“æœ âœ… :
âœ“ 5 åˆ†é’Ÿåè‡ªåŠ¨ç»­è´¹
âœ“ æ–°çš„åˆ°æœŸæ—¶é—´æ˜¾ç¤º
âœ“ æƒç›Šä¸ä¸­æ–­
âœ“ æ˜¾ç¤ºæ—¥å¿—: "âœ… è®¢é˜…...å·²ç»­è´¹"

å¸¸è§é—®é¢˜:
Q: æ˜¾ç¤º"å‰©ä½™ 0 å¤©"?
A: ä¹‹å‰å·²ä¿®å¤ï¼Œåº”è¯¥æ˜¾ç¤ºå‘ä¸Šå–æ•´çš„å¤©æ•°æˆ–ç²¾ç¡®æ—¶é—´
   éªŒè¯ DBUserSubscription.formattedRemainingTime
```

**åœºæ™¯ 4ï¸âƒ£: å–æ¶ˆè®¢é˜…**

```
å‰æ: å·²è®¢é˜…

æµ‹è¯•æ­¥éª¤:
1. æ‰“å¼€ç³»ç»Ÿè®¾ç½®
2. è®¾ç½® > Apple ID > è®¢é˜…
3. é€‰æ‹©"æœ«æ—¥é€šè¡Œè¯"
4. ç‚¹å‡»"å–æ¶ˆè®¢é˜…"
5. ç¡®è®¤å–æ¶ˆ

é¢„æœŸç»“æœ âœ… :
âœ“ æ˜¾ç¤º"å·²å–æ¶ˆ"çŠ¶æ€
âœ“ ç»§ç»­äº«å—æƒç›Šè‡³å‘¨æœŸç»“æŸ
âœ“ å‘¨æœŸç»“æŸåè‡ªåŠ¨é™çº§ä¸ºå…è´¹
âœ“ èƒŒåŒ…å®¹é‡æ¢å¤ 100 æ ¼
```

**åœºæ™¯ 5ï¸âƒ£: æ¢å¤è´­ä¹°**

```
å‰æ: å·²è´­ä¹°è®¢é˜…

æµ‹è¯•æ­¥éª¤:
1. åˆ é™¤åº”ç”¨ (é•¿æŒ‰ > ç§»é™¤)
2. æ¸…ç©º Xcode ç¼“å­˜: rm -rf ~/Library/Developer/Xcode/DerivedData/*
3. é‡æ–°ç¼–è¯‘è¿è¡Œ
4. è¿›å…¥è®¢é˜…ç•Œé¢
5. ç‚¹å‡»"æ¢å¤è´­ä¹°"

é¢„æœŸç»“æœ âœ… :
âœ“ åº”ç”¨é‡æ–°å¯åŠ¨
âœ“ æ£€æŸ¥å¹¶æ¢å¤è´­ä¹°
âœ“ æ˜¾ç¤º"å½“å‰: æ¢ç´¢è€…é€šè¡Œè¯" (æˆ–ä¹‹å‰è´­ä¹°çš„ç­‰çº§)
âœ“ æƒç›Šæ¢å¤
```

**åœºæ™¯ 6ï¸âƒ£: é™çº§è®¢é˜…**

```
å‰æ: å·²è´­ä¹°"é¢†ä¸»å¹´åº¦" (Â¥168)

æµ‹è¯•æ­¥éª¤:
1. è¿›å…¥è®¢é˜…ç•Œé¢
2. é€‰æ‹©"æ¢ç´¢è€…æœˆåº¦" (Â¥12)
3. ç‚¹å‡»"ç«‹å³è®¢é˜…"
4. ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—è¿”è¿˜é‡‘é¢
5. ç¡®è®¤é™çº§

é¢„æœŸç»“æœ âœ… :
âœ“ è®¡ç®—å·®ä»·è¿”è¿˜
âœ“ é™çº§åˆ°"æ¢ç´¢è€…"
âœ“ èƒŒåŒ…å®¹é‡å˜ä¸º 200 æ ¼
âœ“ æƒç›Šç«‹å³æ›´æ–°
```

**åœºæ™¯ 7ï¸âƒ£: ç½‘ç»œé”™è¯¯å¤„ç†**

```
æµ‹è¯•æ­¥éª¤:
1. æ‰“å¼€é£è¡Œæ¨¡å¼ (Settings > Airplane Mode)
2. å°è¯•ç‚¹å‡»"ç«‹å³è®¢é˜…"
3. ç­‰å¾…å˜é‡å“åº”

é¢„æœŸç»“æœ âœ… :
âœ“ æ˜¾ç¤º"ç½‘ç»œé”™è¯¯"æç¤º
âœ“ é‡æ–°è¿æ¥ç½‘ç»œåå¯é‡è¯•
âœ“ æ— å´©æºƒ
```

**åœºæ™¯ 8ï¸âƒ£: æƒç›Šå®æ—¶éªŒè¯**

```
æµ‹è¯•æ­¥éª¤:
1. è´­ä¹°"æ¢ç´¢è€…"è®¢é˜…
2. æ‰“å¼€åº”ç”¨å„åŠŸèƒ½:
   - è¿›å…¥èƒŒåŒ… > æ£€æŸ¥å®¹é‡ (200 æ ¼)
   - è¿›å…¥å»ºé€ ç•Œé¢ > æ£€æŸ¥å»ºé€ æ—¶é—´ (å‡åŠ)
   - è¿›å…¥æ¢ç´¢ > æ£€æŸ¥æ¬¡æ•°é™åˆ¶ (æ— é™)
   - è¿›å…¥äº¤æ˜“ > æ£€æŸ¥äº¤æ˜“é™åˆ¶ (æ— é™)

é¢„æœŸç»“æœ âœ… :
âœ“ èƒŒåŒ…: 100 â†’ 200 æ ¼
âœ“ å»ºé€ : æ—¶é—´å‡åŠ (2x é€Ÿåº¦)
âœ“ æ¢ç´¢: æ˜¾ç¤º"æ— é™æ¬¡"
âœ“ äº¤æ˜“: æ˜¾ç¤º"æ— é™"
âœ“ æ— é™åˆ¶æ˜¾ç¤ºè´Ÿæ•° (-1 åº”è§£é‡Šä¸ºæ— é™)
```

#### æ­¥éª¤ 6.3: Bug ä¿®å¤ (30 åˆ†é’Ÿ)

**å¸¸è§é—®é¢˜ 1: æƒç›Šä¸ç”Ÿæ•ˆ**

```
ç°è±¡: è´­ä¹°åæƒç›Šæœªæ›´æ–°

åŸå› : InventoryManager ç­‰æœªé‡æ–°åŠ è½½

ä¿®å¤:
extension InventoryManager {
    func refreshBenefits() {
        // é‡æ–°åŠ è½½èƒŒåŒ…ä»¥åº”ç”¨æ–°å®¹é‡
        Task {
            await loadPlayerInventory()
        }
        
        // åŒæ—¶å‘é€é€šçŸ¥ç»™å…¶ä»– Manager
        NotificationCenter.default.post(
            name: NSNotification.Name("SubscriptionChanged")
        )
    }
}

// åœ¨ handleSubscriptionTransaction ä¸­è°ƒç”¨:
await inventoryManager.refreshBenefits()
```

**å¸¸è§é—®é¢˜ 2: æ˜¾ç¤º"å‰©ä½™ 0 å¤©"**

```
ç°è±¡: è´­ä¹°åæ˜¾ç¤º"å‰©ä½™ 0 å¤©"

åŸå› : æ²™ç›’ç¯å¢ƒæœˆè®¢é˜…åªæœ‰ 5 åˆ†é’Ÿæœ‰æ•ˆæœŸ

éªŒè¯ä¿®å¤:
åœ¨ SubscriptionCard ä¸­ä¿®æ”¹æ˜¾ç¤º:

Text(iapManager.activeSubscription?.formattedRemainingTime ?? "å·²è¿‡æœŸ")
    .font(.caption)
    .foregroundColor(.red)
    
// åº”è¯¥æ˜¾ç¤ºç²¾ç¡®çš„å‰©ä½™æ—¶é—´ï¼Œå¦‚"å‰©ä½™ 4 åˆ†é’Ÿ"
```

**å¸¸è§é—®é¢˜ 3: æ¢å¤è´­ä¹°ä¸å·¥ä½œ**

```
åŸå› : æ²™ç›’éœ€è¦åŒä¸€è´¦å·ç™»å½•

æ£€æŸ¥:
1. ç¡®è®¤è®¾ç½®ä¸­æ²™ç›’è´¦å·æ­£ç¡®ç™»å½•
2. ç¡®è®¤ IAPManager.restoreSubscriptions() è¢«è°ƒç”¨
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

ä¿®å¤:
func restoreSubscriptions() async {
    do {
        print("ğŸ”„ å¼€å§‹æ¢å¤...")
        try await AppStore.sync()
        print("âœ… App Store åŒæ­¥å®Œæˆ")
        await loadActiveSubscription()
        print("âœ… è®¢é˜…å·²æ¢å¤")
    } catch {
        print("âŒ æ¢å¤å¤±è´¥: \(error)")
    }
}
```

### âœ… Day 6 æ£€æŸ¥æ¸…å•

- [ ] 8 ä¸ªæµ‹è¯•åœºæ™¯å…¨éƒ¨é€šè¿‡
- [ ] è´­ä¹°æµç¨‹æ­£å¸¸
- [ ] æƒç›Šå®æ—¶ç”Ÿæ•ˆ
- [ ] è‡ªåŠ¨ç»­è´¹æ­£å¸¸
- [ ] å–æ¶ˆ/æ¢å¤åŠŸèƒ½æ­£å¸¸
- [ ] æ— ç½‘ç»œé”™è¯¯æç¤º

---

## âœ… Day 7: æœ€ç»ˆæ£€æŸ¥ & ä¼˜åŒ– (2 å°æ—¶)

### ç›®æ ‡
- âœ… ä»£ç æœ€ç»ˆæ£€æŸ¥
- âœ… æ–‡æ¡£å®Œå–„
- âœ… æäº¤å®¡æ ¸å‡†å¤‡

### å…·ä½“æ­¥éª¤

#### æ­¥éª¤ 7.1: ä»£ç è´¨é‡æ£€æŸ¥ (1 å°æ—¶)

```swift
// æ£€æŸ¥æ¸…å•:

// âœ… ç¼–è¯‘
Xcode > Product > Build
â””â”€ 0 errors, 0 warnings

// âœ… å†…å­˜æ³„æ¼æ£€æŸ¥
Xcode > Product > Profile > Leaks
â””â”€ æ— æ³„æ¼

// âœ… ä»£ç é£æ ¼
- å‡½æ•°åå°é©¼å³° (loadSubscriptionProducts)
- å¸¸é‡å¤§é©¼å³°æˆ–å¤§å†™ (SubscriptionTier, subscriptionProductIds)
- æ³¨è§£å®Œæ•´ (// MARK: -)
- æ—  print è°ƒè¯•è¯­å¥

// âœ… é”™è¯¯å¤„ç†
- æ‰€æœ‰ç½‘ç»œè¯·æ±‚æœ‰ try/catch
- æ‰€æœ‰ç”¨æˆ·æ“ä½œæœ‰åé¦ˆ
- é”™è¯¯æ¶ˆæ¯æ¸…æ™°
```

**ä»£ç æ¸…ç†è„šæœ¬**:
```bash
# ç§»é™¤æ‰€æœ‰ debug print
# æœç´¢: print(
# æ›¿æ¢ä¸º: // print(

# æˆ–ä½¿ç”¨æ­£åˆ™æ›¿æ¢å™¨
/^\s*print\(.*\)$/

# éªŒè¯ç¼–è¯‘
xcodebuild -scheme EarthLord -configuration Release
```

#### æ­¥éª¤ 7.2: åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥ (30 åˆ†é’Ÿ)

| åŠŸèƒ½ | æ£€æŸ¥é¡¹ | çŠ¶æ€ |
|------|--------|------|
| äº§å“åˆ—è¡¨ | æ˜¾ç¤º 4 ä¸ªäº§å“ | âœ… |
| è´­ä¹° | æˆåŠŸæ‰£è´¹ | âœ… |
| æƒç›Š | 4 ä¸ªæƒç›Šç«‹å³ç”Ÿæ•ˆ | âœ… |
| å–æ¶ˆ | å¯åœ¨ç³»ç»Ÿè®¾ç½®å–æ¶ˆ | âœ… |
| æ¢å¤ | å¯æ¢å¤ä¹‹å‰è´­ä¹° | âœ… |
| ç»­è´¹ | è‡ªåŠ¨ç»­è´¹ | âœ… |
| UI | é¡µé¢ç¾è§‚ï¼Œæ— å´©æºƒ | âœ… |
| æ€§èƒ½ | åŠ è½½<2sï¼Œæ— å¡é¡¿ | âœ… |

#### æ­¥éª¤ 7.3: æ–‡æ¡£å®Œå–„ (30 åˆ†é’Ÿ)

```markdown
# è®¢é˜…ç³»ç»Ÿæ–‡æ¡£æ£€æŸ¥

- [ ] README.md æ›´æ–°
  - [ ] æ–°å¢åŠŸèƒ½è¯´æ˜
  - [ ] è®¢é˜…ç­‰çº§è¯´æ˜
  - [ ] å¿«é€Ÿå¼€å§‹æŒ‡å—

- [ ] ä»£ç æ³¨é‡Šå®Œæ•´
  - [ ] IAPManager å„æ–¹æ³•æœ‰è¯´æ˜
  - [ ] UI ç»„ä»¶æœ‰è¯´æ˜

- [ ] å‘å¸ƒè¯´æ˜å‡†å¤‡
  v2.0 æ›´æ–°è¯´æ˜:
  âœ¨ æ–°å¢æœ«æ—¥é€šè¡Œè¯è®¢é˜…ç³»ç»Ÿ
  - 3 ä¸ªç­‰çº§: å…è´¹/æ¢ç´¢è€…/é¢†ä¸»
  - çµæ´»çš„æœˆåº¦å’Œå¹´åº¦è®¡åˆ’
  - æƒç›ŠåŒ…æ‹¬å»ºé€ åŠ é€Ÿã€èƒŒåŒ…æ‰©å®¹ã€æ— é™æ¢ç´¢
  ğŸ”§ ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
```

### âœ… Day 7 æ£€æŸ¥æ¸…å•

- [ ] ä»£ç ç¼–è¯‘ 0 errors, 0 warnings
- [ ] åŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥å…¨éƒ¨é€šè¿‡
- [ ] æ–‡æ¡£å®Œå–„
- [ ] ç‰ˆæœ¬å·æ›´æ–° (1.0 â†’ 2.0)
- [ ] å‘å¸ƒè¯´æ˜å‡†å¤‡

---

## ğŸ’¾ 7 å¤©å®ŒæˆæŒ‡æ ‡

### ä»£ç æŒ‡æ ‡
```
æ€»ä»£ç è¡Œæ•°: ~800 è¡Œæ–°å¢
â”œâ”€ IAPModels.swift: 200 è¡Œ
â”œâ”€ IAPManager.swift: 300 è¡Œ
â”œâ”€ UI ç»„ä»¶: 200 è¡Œ
â””â”€ Manager æ‰©å±•: 100 è¡Œ

ä»£ç è´¨é‡:
âœ… ç¼–è¯‘: 0 errors, 0 warnings
âœ… ç±»å‹å®‰å…¨: æ— å¼ºåˆ¶æ‹†åŒ…
âœ… å¼‚æ­¥å¤„ç†: ä½¿ç”¨ async/await
âœ… å†…å­˜ç®¡ç†: æ— æ³„æ¼
```

### åŠŸèƒ½æŒ‡æ ‡
```
âœ… 4 ä¸ªè®¢é˜…äº§å“å®Œå…¨å¯ç”¨
âœ… 8 ä¸ªæµ‹è¯•åœºæ™¯å…¨éƒ¨é€šè¿‡
âœ… 4 ä¸ªæƒç›Šç³»ç»Ÿé›†æˆ
âœ… UI ç¾è§‚åº¦ 9/10
```

### ä¸šåŠ¡æŒ‡æ ‡
```
é¢„æœŸè½¬åŒ–ç‡: 5-15% (è¡Œä¸šå¹³å‡ 3-5%)
ç›®æ ‡ ARPPU: Â¥15+
å¹´åº¦æ”¶å…¥ (100K MAU): Â¥300ä¸‡+
```

---

##  ğŸ¯ å‘å¸ƒå‰æœ€åæ¸…å•

### æäº¤ App Store ä¹‹å‰

```
[ ] ä»£ç éšç§æ”¿ç­–é¡µé¢æœ‰è®¢é˜…æ¡æ¬¾
    https://earthlord.com/privacy

[ ] ç”¨æˆ·å¯éšæ—¶å–æ¶ˆè®¢é˜…
    è®¾ç½® > Apple ID > è®¢é˜… > å–æ¶ˆ

[ ] ä»·æ ¼é€æ˜ï¼Œæ— éšè—æ”¶è´¹
    é¦–æœˆ 7 å¤©å…è´¹è¯•ç”¨åç»­è´¹

[ ] æ•°æ®åº“å¤‡ä»½å®Œæ•´
    supabase_migration_011_subscriptions.sql

[ ] ç‰ˆæœ¬å·æ›´æ–°
    Info.plist: CFBundleShortVersionString = 2.0

[ ] å‘å¸ƒè¯´æ˜å‡†å¤‡å®Œæ¯•
    "v2.0: æ¨å‡ºæœ«æ—¥é€šè¡Œè¯è®¢é˜…ç³»ç»Ÿ"

[ ] App å›¾æ ‡æ›´æ–° (å¯é€‰)
    ğŸ’ é€šè¡Œè¯å›¾æ ‡

[ ] 

æˆªå›¾æ›´æ–°
    - è®¢é˜…ç•Œé¢
    - æƒç›Šå¯¹æ¯”è¡¨
```

---

## ğŸ‰ æˆåŠŸæ ‡å¿—

å®Œæˆä»¥ä¸‹å†…å®¹ï¼Œæ‚¨çš„è®¢é˜…ç³»ç»Ÿå°±æˆåŠŸäº†ï¼š

âœ… **Day 1 å®Œæˆ**: 4 ä¸ªäº§å“åœ¨ App Store Connect å¯ç”¨  
âœ… **Day 2 å®Œæˆ**: Supabase æ•°æ®åº“å°±ç»ª  
âœ… **Day 3 å®Œæˆ**: IAPManager ä»£ç å®Œæ•´ä¸”å¯ç¼–è¯‘  
âœ… **Day 4 å®Œæˆ**: SubscriptionView æ˜¾ç¤ºç¾è§‚  
âœ… **Day 5 å®Œæˆ**: æƒç›Šå®æ—¶ç”Ÿæ•ˆ (èƒŒåŒ…ã€å»ºé€ ç­‰)  
âœ… **Day 6 å®Œæˆ**: 8 ä¸ªæ²™ç›’æµ‹è¯•å…¨é€šè¿‡  
âœ… **Day 7 å®Œæˆ**: ä»£ç è´¨é‡è¾¾æ ‡ï¼Œå‡†å¤‡å‘å¸ƒ  

**æ€»æˆæœ**:
ğŸ® å®Œæ•´çš„ iOS è‡ªåŠ¨ç»­æœŸè®¢é˜…ç³»ç»Ÿ  
ğŸ’° ç¨³å®šçš„æœˆåº¦æ”¶å…¥æ¥æº  
ğŸ‘¥ æå‡ç”¨æˆ· LTV å’Œç•™å­˜  
ğŸ“Š å¯é‡åŒ–çš„å•†ä¸šæŒ‡æ ‡  

---

**é¢„è®¡å®Œæˆæ—¶é—´**: 7 å¤© (28-30 å°æ—¶)  
**éš¾åº¦**: â­â­ ä¸­ç­‰  
**é¢„æœŸæ”¶ç›Š**: Â¥300ä¸‡+ / å¹´ (åŸºäº 100K MAU)  

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ** ğŸš€
